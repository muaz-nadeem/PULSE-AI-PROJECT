{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/5th%20sem/PULSE-AI-PROJECT/lib/store.ts"],"sourcesContent":["\"use client\"\n\nimport { create } from \"zustand\"\n\nexport interface Task {\n  id: string\n  title: string\n  description?: string\n  priority: \"high\" | \"medium\" | \"low\"\n  timeEstimate: number\n  completed: boolean\n  createdAt: Date\n  category?: string\n  dueDate?: string\n  focusMode?: boolean\n}\n\nexport interface FocusSession {\n  id: string\n  duration: number\n  date: Date\n  completed: boolean\n}\n\nexport interface Distraction {\n  id: string\n  type: \"app\" | \"website\" | \"notification\" | \"phone\" | \"person\" | \"thought\" | \"other\"\n  source: string\n  duration: number // minutes\n  date: Date\n  focusSessionId?: string\n  notes?: string\n}\n\nexport interface Challenge {\n  id: string\n  title: string\n  description: string\n  type: \"weekly\" | \"monthly\"\n  startDate: Date\n  endDate: Date\n  target: number\n  current: number\n  metric: \"focus_sessions\" | \"tasks_completed\" | \"habits_streak\" | \"goals_progress\"\n  reward: string\n  completed: boolean\n}\n\nexport interface Achievement {\n  id: string\n  title: string\n  description: string\n  icon: string\n  unlockedAt?: Date\n  category: \"focus\" | \"tasks\" | \"habits\" | \"goals\" | \"streaks\" | \"milestones\"\n}\n\nexport interface AnalyticsData {\n  totalFocusHours: number\n  totalFocusTime: number\n  tasksCompletedToday: number\n  tasksCompletedThisWeek: number\n  averageFocusTime: number\n  streakDays: number\n  tasksCompleted: number\n  focusSessions: FocusSession[]\n}\n\nexport interface UserSettings {\n  focusDuration: number\n  breakDuration: number\n  dailyGoal: number\n  theme: \"light\" | \"dark\"\n  soundEnabled: boolean\n}\n\nexport interface BlockingSettings {\n  blockingMode: \"strict\" | \"standard\" | \"relaxed\"\n  blockedApps: string[]\n}\n\nexport interface MoodEntry {\n  id: string\n  mood: \"excellent\" | \"good\" | \"neutral\" | \"sad\" | \"very-sad\"\n  notes: string\n  date: Date\n}\n\nexport interface Habit {\n  id: string\n  name: string\n  description?: string\n  frequency: \"daily\" | \"weekly\"\n  color: string\n  createdAt: Date\n  completedDates: string[] // ISO date strings\n  currentStreak: number\n  longestStreak: number\n}\n\nexport interface ScheduleItem {\n  time: string\n  duration: number\n  task: string\n  priority: \"high\" | \"medium\" | \"low\"\n}\n\nexport interface TimeBlock {\n  id: string\n  title: string\n  startTime: string // HH:mm format\n  endTime: string // HH:mm format\n  date: string // YYYY-MM-DD format\n  taskId?: string\n  color: string\n  notes?: string\n}\n\nexport interface SoundPreset {\n  id: string\n  name: string\n  type: \"white_noise\" | \"ambient\" | \"nature\" | \"focus\" | \"custom\"\n  url?: string\n  icon: string\n}\n\nexport interface Playlist {\n  id: string\n  name: string\n  sounds: string[] // Sound preset IDs\n  createdAt: Date\n}\n\nexport interface TeamMember {\n  id: string\n  name: string\n  email: string\n  role: \"partner\" | \"mentor\" | \"teammate\"\n  joinedAt: Date\n}\n\nexport interface SharedGoal {\n  id: string\n  goalId: string\n  sharedWith: string[] // Team member IDs\n  sharedAt: Date\n  lastViewed?: Date\n}\n\nexport interface GroupChallenge {\n  id: string\n  title: string\n  description: string\n  createdBy: string\n  participants: string[]\n  startDate: Date\n  endDate: Date\n  target: number\n  metric: \"focus_sessions\" | \"tasks_completed\" | \"habits_streak\" | \"goals_progress\"\n  leaderboard: { userId: string; score: number }[]\n}\n\nexport interface Notification {\n  id: string\n  type: \"reminder\" | \"break\" | \"celebration\" | \"suggestion\" | \"milestone\"\n  title: string\n  message: string\n  timestamp: Date\n  read: boolean\n  actionUrl?: string\n}\n\nexport interface Milestone {\n  id: string\n  title: string\n  description?: string\n  completed: boolean\n  dueDate?: string\n  completedDate?: string\n  order: number\n}\n\nexport interface Goal {\n  id: string\n  title: string\n  description?: string\n  category: string\n  targetDate?: string\n  createdAt: Date\n  milestones: Milestone[]\n  progress: number // 0-100\n  status: \"active\" | \"completed\" | \"paused\"\n  color: string\n}\n\nexport interface AuthState {\n  isAuthenticated: boolean\n  userEmail: string\n}\n\ninterface StoreState {\n  // User data\n  userName: string\n  userGoals: string[]\n  userData?: { name?: string; role?: string }\n  userPreferences: UserSettings\n\n  // Navigation\n  currentPage: string\n  isMobileMenuOpen: boolean\n  setMobileMenuOpen: (isOpen: boolean) => void\n\n  // Tasks\n  tasks: Task[]\n  addTask: (task: Omit<Task, \"id\" | \"completed\" | \"createdAt\">) => void\n  deleteTask: (id: string) => void\n  toggleTask: (id: string) => void\n  updateTask: (id: string, updates: Partial<Task>) => void\n\n  // Focus sessions\n  focusSessions: FocusSession[]\n  addFocusSession: (duration: number) => void\n\n  // Distractions\n  distractions: Distraction[]\n  addDistraction: (distraction: Omit<Distraction, \"id\" | \"date\">) => void\n  deleteDistraction: (id: string) => void\n  getDistractionInsights: () => { topSources: { source: string; count: number }[]; totalTime: number; patterns: string[] }\n\n  // Challenges\n  challenges: Challenge[]\n  achievements: Achievement[]\n  addChallenge: (challenge: Omit<Challenge, \"id\" | \"current\" | \"completed\">) => void\n  updateChallengeProgress: (challengeId: string) => void\n  checkAchievements: () => void\n  getUnlockedAchievements: () => Achievement[]\n  getLeaderboard: () => { userId: string; score: number; rank: number }[]\n\n  // Analytics\n  analytics: AnalyticsData\n  getAnalytics: () => AnalyticsData\n\n  // Settings\n  setSettings: (settings: Partial<UserSettings>) => void\n  setUserData: (name: string, goals: string[], role?: string) => void\n  \n  // Blocking Settings\n  blockingSettings: BlockingSettings\n  setBlockingMode: (mode: \"strict\" | \"standard\" | \"relaxed\") => void\n  addBlockedApp: (appName: string) => void\n  removeBlockedApp: (appName: string) => void\n\n  // Page navigation\n  setCurrentPage: (page: string) => void\n\n  // Mood tracking\n  moodEntries: MoodEntry[]\n  addMoodEntry: (mood: \"excellent\" | \"good\" | \"neutral\" | \"sad\" | \"very-sad\", notes: string) => void\n  getMoodHistory: () => MoodEntry[]\n\n  // Habits\n  habits: Habit[]\n  addHabit: (habit: Omit<Habit, \"id\" | \"createdAt\" | \"completedDates\" | \"currentStreak\" | \"longestStreak\">) => void\n  deleteHabit: (id: string) => void\n  toggleHabitCompletion: (habitId: string, date: string) => void\n  getHabitStreak: (habitId: string) => number\n\n  // Goals\n  goals: Goal[]\n  addGoal: (goal: Omit<Goal, \"id\" | \"createdAt\" | \"progress\" | \"status\">) => void\n  deleteGoal: (id: string) => void\n  updateGoal: (id: string, updates: Partial<Goal>) => void\n  addMilestone: (goalId: string, milestone: Omit<Milestone, \"id\" | \"order\">) => void\n  updateMilestone: (goalId: string, milestoneId: string, updates: Partial<Milestone>) => void\n  deleteMilestone: (goalId: string, milestoneId: string) => void\n  toggleMilestone: (goalId: string, milestoneId: string) => void\n  getGoalProgress: (goalId: string) => number\n  getAISuggestions: (goalId: string) => string[]\n\n  // Schedule\n  currentSchedule: ScheduleItem[]\n  acceptedSchedules: ScheduleItem[][]\n  setCurrentSchedule: (schedule: ScheduleItem[]) => void\n  acceptSchedule: () => void\n  getAcceptedSchedules: () => ScheduleItem[][]\n\n  // Time Blocks\n  timeBlocks: TimeBlock[]\n  addTimeBlock: (block: Omit<TimeBlock, \"id\">) => void\n  updateTimeBlock: (id: string, updates: Partial<TimeBlock>) => void\n  deleteTimeBlock: (id: string) => void\n  getTimeBlocksForDate: (date: string) => TimeBlock[]\n  moveTimeBlock: (id: string, newDate: string, newStartTime: string) => void\n\n  // Focus Sounds\n  soundPresets: SoundPreset[]\n  playlists: Playlist[]\n  currentPlaylist?: string\n  addSoundPreset: (preset: Omit<SoundPreset, \"id\">) => void\n  addPlaylist: (playlist: Omit<Playlist, \"id\" | \"createdAt\">) => void\n  deletePlaylist: (id: string) => void\n  setCurrentPlaylist: (id?: string) => void\n\n  // Reports\n  generateWeeklyReport: () => { summary: string; data: any }\n  generateMonthlyReport: () => { summary: string; data: any }\n  exportToCSV: () => string\n  exportToPDF: () => void\n\n  // Team/Collaboration\n  teamMembers: TeamMember[]\n  sharedGoals: SharedGoal[]\n  groupChallenges: GroupChallenge[]\n  addTeamMember: (member: Omit<TeamMember, \"id\" | \"joinedAt\">) => void\n  shareGoal: (goalId: string, memberIds: string[]) => void\n  createGroupChallenge: (challenge: Omit<GroupChallenge, \"id\" | \"leaderboard\">) => void\n  getTeamProductivityInsights: () => { totalFocusTime: number; totalTasks: number; averageProgress: number }\n\n  // Notifications\n  notifications: Notification[]\n  addNotification: (notification: Omit<Notification, \"id\" | \"timestamp\" | \"read\">) => void\n  markNotificationRead: (id: string) => void\n  clearNotifications: () => void\n  getUnreadNotifications: () => Notification[]\n  checkSmartNotifications: () => void\n\n  // Voice Commands\n  isVoiceActive: boolean\n  setVoiceActive: (active: boolean) => void\n  processVoiceCommand: (command: string) => void\n\n  auth: AuthState\n  setAuth: (isAuthenticated: boolean, userEmail?: string) => void\n  logout: () => void\n}\n\nexport const useStore = create<StoreState>((set, get) => ({\n  userName: \"\",\n  userGoals: [],\n  userData: undefined,\n  userPreferences: {\n    focusDuration: 25,\n    breakDuration: 5,\n    dailyGoal: 8,\n    theme: \"dark\",\n    soundEnabled: true,\n  },\n\n  currentPage: \"dashboard\",\n  isMobileMenuOpen: false,\n  setMobileMenuOpen: (isOpen) => set({ isMobileMenuOpen: isOpen }),\n  blockingSettings: {\n    blockingMode: \"standard\",\n    blockedApps: [\"Instagram\", \"TikTok\", \"YouTube\"],\n  },\n  setBlockingMode: (mode) =>\n    set((state) => ({\n      blockingSettings: { ...state.blockingSettings, blockingMode: mode },\n    })),\n  addBlockedApp: (appName) =>\n    set((state) => ({\n      blockingSettings: {\n        ...state.blockingSettings,\n        blockedApps: [...state.blockingSettings.blockedApps, appName],\n      },\n    })),\n  removeBlockedApp: (appName) =>\n    set((state) => ({\n      blockingSettings: {\n        ...state.blockingSettings,\n        blockedApps: state.blockingSettings.blockedApps.filter((app) => app !== appName),\n      },\n    })),\n  tasks: [],\n  focusSessions: [],\n  distractions: [],\n  challenges: [],\n  achievements: [\n    {\n      id: \"first_focus\",\n      title: \"First Focus\",\n      description: \"Complete your first focus session\",\n      icon: \"ðŸŽ¯\",\n      category: \"focus\",\n    },\n    {\n      id: \"focus_master\",\n      title: \"Focus Master\",\n      description: \"Complete 10 focus sessions\",\n      icon: \"ðŸ”¥\",\n      category: \"focus\",\n    },\n    {\n      id: \"task_warrior\",\n      title: \"Task Warrior\",\n      description: \"Complete 50 tasks\",\n      icon: \"âš”ï¸\",\n      category: \"tasks\",\n    },\n    {\n      id: \"habit_hero\",\n      title: \"Habit Hero\",\n      description: \"Maintain a 7-day streak on any habit\",\n      icon: \"ðŸ’ª\",\n      category: \"habits\",\n    },\n    {\n      id: \"goal_getter\",\n      title: \"Goal Getter\",\n      description: \"Complete your first goal\",\n      icon: \"ðŸ†\",\n      category: \"goals\",\n    },\n    {\n      id: \"streak_king\",\n      title: \"Streak King\",\n      description: \"Maintain a 30-day focus streak\",\n      icon: \"ðŸ‘‘\",\n      category: \"streaks\",\n    },\n    {\n      id: \"milestone_master\",\n      title: \"Milestone Master\",\n      description: \"Complete 10 milestones\",\n      icon: \"â­\",\n      category: \"milestones\",\n    },\n  ],\n  analytics: {\n    totalFocusHours: 0,\n    totalFocusTime: 0,\n    tasksCompletedToday: 0,\n    tasksCompletedThisWeek: 0,\n    averageFocusTime: 0,\n    streakDays: 0,\n    tasksCompleted: 0,\n    focusSessions: [],\n  },\n  moodEntries: [],\n  habits: [],\n  goals: [],\n  currentSchedule: [],\n  acceptedSchedules: [],\n  timeBlocks: [],\n  soundPresets: [\n    {\n      id: \"white_noise_1\",\n      name: \"White Noise\",\n      type: \"white_noise\",\n      icon: \"ðŸŒŠ\",\n    },\n    {\n      id: \"rain_1\",\n      name: \"Rain\",\n      type: \"nature\",\n      icon: \"ðŸŒ§ï¸\",\n    },\n    {\n      id: \"forest_1\",\n      name: \"Forest\",\n      type: \"nature\",\n      icon: \"ðŸŒ²\",\n    },\n    {\n      id: \"coffee_1\",\n      name: \"Coffee Shop\",\n      type: \"ambient\",\n      icon: \"â˜•\",\n    },\n    {\n      id: \"ocean_1\",\n      name: \"Ocean Waves\",\n      type: \"nature\",\n      icon: \"ðŸŒŠ\",\n    },\n    {\n      id: \"focus_1\",\n      name: \"Deep Focus\",\n      type: \"focus\",\n      icon: \"ðŸŽµ\",\n    },\n  ],\n  playlists: [],\n  currentPlaylist: undefined,\n  teamMembers: [],\n  sharedGoals: [],\n  groupChallenges: [],\n  notifications: [],\n  isVoiceActive: false,\n\n  auth: {\n    isAuthenticated: false,\n    userEmail: \"\",\n  },\n\n  addTask: async (task) => {\n    try {\n      const api = await import(\"./api\")\n      // Prepare data for API - only send snake_case fields\n      const apiData: any = {\n        title: task.title,\n        description: task.description || \"\",\n        priority: task.priority,\n        time_estimate: task.timeEstimate,\n        category: task.category,\n        focus_mode: task.focusMode || false,\n      }\n      \n      // Convert dueDate to ISO string if provided\n      if (task.dueDate) {\n        // If it's already a string in YYYY-MM-DD format, convert to ISO datetime\n        const dueDate = new Date(task.dueDate)\n        if (!isNaN(dueDate.getTime())) {\n          apiData.due_date = dueDate.toISOString()\n        }\n      }\n      \n      const created = (await api.tasksAPI.create(apiData)) as any\n      \n      // Add to store with proper field mapping\n      set((state) => ({\n        tasks: [\n          ...state.tasks,\n          {\n            id: created.id,\n            title: created.title,\n            description: created.description || \"\",\n            priority: created.priority,\n            timeEstimate: created.time_estimate || 30,\n            completed: created.completed || false,\n            createdAt: new Date(created.created_at),\n            category: created.category,\n            dueDate: created.due_date ? new Date(created.due_date).toISOString().split(\"T\")[0] : undefined,\n            focusMode: created.focus_mode || false,\n          },\n        ],\n      }))\n    } catch (error) {\n      console.error(\"Failed to create task in API:\", error)\n      // Still add to local state as fallback, but log the error\n      set((state) => {\n        const newTask = {\n          ...task,\n          id: Math.random().toString(36).substring(7),\n          completed: false,\n          createdAt: new Date(),\n        }\n        return {\n          tasks: [...state.tasks, newTask],\n        }\n      })\n    }\n  },\n\n  deleteTask: async (id) => {\n    try {\n      const api = await import(\"./api\")\n      await api.tasksAPI.delete(id)\n    } catch (error) {\n      console.error(\"Failed to delete task from API:\", error)\n    }\n    set((state) => ({\n      tasks: state.tasks.filter((t) => t.id !== id),\n    }))\n  },\n\n  toggleTask: async (id) => {\n    const state = get()\n    const task = state.tasks.find((t) => t.id === id)\n    if (task) {\n      try {\n        const api = await import(\"./api\")\n        await api.tasksAPI.update(id, { completed: !task.completed })\n      } catch (error) {\n        console.error(\"Failed to update task in API:\", error)\n      }\n    }\n    set((state) => ({\n      tasks: state.tasks.map((t) => (t.id === id ? { ...t, completed: !t.completed } : t)),\n    }))\n  },\n\n  updateTask: async (id, updates) => {\n    try {\n      const api = await import(\"./api\")\n      const apiUpdates: any = {}\n      if (updates.timeEstimate !== undefined) apiUpdates.time_estimate = updates.timeEstimate\n      if (updates.dueDate !== undefined) apiUpdates.due_date = updates.dueDate\n      if (updates.focusMode !== undefined) apiUpdates.focus_mode = updates.focusMode\n      if (updates.completed !== undefined) apiUpdates.completed = updates.completed\n      if (updates.title !== undefined) apiUpdates.title = updates.title\n      if (updates.description !== undefined) apiUpdates.description = updates.description\n      if (updates.priority !== undefined) apiUpdates.priority = updates.priority\n      if (updates.category !== undefined) apiUpdates.category = updates.category\n      \n      await api.tasksAPI.update(id, apiUpdates)\n    } catch (error) {\n      console.error(\"Failed to update task in API:\", error)\n    }\n    set((state) => ({\n      tasks: state.tasks.map((t) => (t.id === id ? { ...t, ...updates } : t)),\n    }))\n  },\n\n  addFocusSession: async (duration) => {\n    try {\n      const api = await import(\"./api\")\n      await api.focusSessionsAPI.create({ duration, completed: true })\n    } catch (error) {\n      console.error(\"Failed to create focus session in API:\", error)\n    }\n    \n    set((state) => {\n      const newSession: FocusSession = {\n        id: Math.random().toString(36).substring(7),\n        duration,\n        date: new Date(),\n        completed: true,\n      }\n\n      const updatedSessions = [...state.focusSessions, newSession]\n\n      const today = new Date()\n      today.setHours(0, 0, 0, 0)\n\n      const todaySessions = updatedSessions.filter((s) => {\n        const sessionDate = new Date(s.date)\n        sessionDate.setHours(0, 0, 0, 0)\n        return sessionDate.getTime() === today.getTime()\n      })\n\n      const thisWeekStart = new Date(today)\n      thisWeekStart.setDate(today.getDate() - today.getDay())\n\n      const weekTasks = state.tasks.filter((t) => {\n        const taskDate = new Date(t.createdAt)\n        taskDate.setHours(0, 0, 0, 0)\n        return taskDate >= thisWeekStart && t.completed\n      })\n\n      const totalFocusMinutes = updatedSessions.reduce((sum, s) => sum + s.duration, 0)\n      const totalFocusHours = Math.round((totalFocusMinutes / 60) * 10) / 10\n      const averageFocusTime =\n        updatedSessions.length > 0 ? Math.round((totalFocusMinutes / updatedSessions.length) * 10) / 10 : 0\n\n      const todayCompleted = state.tasks.filter((t) => {\n        const taskDate = new Date(t.createdAt)\n        taskDate.setHours(0, 0, 0, 0)\n        return taskDate.getTime() === today.getTime() && t.completed\n      }).length\n\n      return {\n        focusSessions: updatedSessions,\n        analytics: {\n          totalFocusHours,\n          totalFocusTime: totalFocusHours,\n          tasksCompletedToday: todayCompleted,\n          tasksCompletedThisWeek: weekTasks.length,\n          averageFocusTime,\n          streakDays: updatedSessions.length > 0 ? Math.min(updatedSessions.length, 30) : 0,\n          tasksCompleted: state.tasks.filter((t) => t.completed).length,\n          focusSessions: updatedSessions,\n        },\n      }\n    })\n  },\n\n  getAnalytics: () => {\n    const state = get()\n    return state.analytics\n  },\n\n  setSettings: (settings) =>\n    set((state) => ({\n      userPreferences: { ...state.userPreferences, ...settings },\n    })),\n\n  setUserData: (name, goals, role) =>\n    set({\n      userName: name,\n      userGoals: goals,\n      userData: { name, role },\n    }),\n\n  setCurrentPage: (page) => set({ currentPage: page }),\n\n  addMoodEntry: (mood, notes) =>\n    set((state) => {\n      const newEntry: MoodEntry = {\n        id: Math.random().toString(36).substring(7),\n        mood,\n        notes,\n        date: new Date(),\n      }\n      return {\n        moodEntries: [...state.moodEntries, newEntry],\n      }\n    }),\n\n  getMoodHistory: () => {\n    const state = get()\n    return state.moodEntries\n  },\n\n  addHabit: (habit) =>\n    set((state) => {\n      const newHabit: Habit = {\n        ...habit,\n        id: Math.random().toString(36).substring(7),\n        createdAt: new Date(),\n        completedDates: [],\n        currentStreak: 0,\n        longestStreak: 0,\n      }\n      return {\n        habits: [...state.habits, newHabit],\n      }\n    }),\n\n  deleteHabit: (id) =>\n    set((state) => ({\n      habits: state.habits.filter((h) => h.id !== id),\n    })),\n\n  toggleHabitCompletion: (habitId, date) =>\n    set((state) => {\n      const habit = state.habits.find((h) => h.id === habitId)\n      if (!habit) return state\n\n      const dateStr = date\n      const isCompleted = habit.completedDates.includes(dateStr)\n      const newCompletedDates = isCompleted\n        ? habit.completedDates.filter((d) => d !== dateStr)\n        : [...habit.completedDates, dateStr].sort()\n\n      // Calculate streaks\n      const today = new Date()\n      today.setHours(0, 0, 0, 0)\n      const todayStr = today.toISOString().split(\"T\")[0]\n\n      let currentStreak = 0\n      let longestStreak = habit.longestStreak\n\n      if (newCompletedDates.length > 0) {\n        // Calculate current streak\n        const sortedDates = [...newCompletedDates].sort().reverse()\n        let checkDate = new Date(today)\n        \n        for (const dateStr of sortedDates) {\n          const checkDateStr = checkDate.toISOString().split(\"T\")[0]\n          if (dateStr === checkDateStr) {\n            currentStreak++\n            checkDate.setDate(checkDate.getDate() - 1)\n          } else {\n            break\n          }\n        }\n\n        // Calculate longest streak\n        let tempStreak = 0\n        let prevDate: Date | null = null\n        for (const dateStr of sortedDates) {\n          const currentDate = new Date(dateStr)\n          if (prevDate === null) {\n            tempStreak = 1\n          } else {\n            const diffDays = Math.floor((prevDate.getTime() - currentDate.getTime()) / (1000 * 60 * 60 * 24))\n            if (diffDays === 1) {\n              tempStreak++\n            } else {\n              longestStreak = Math.max(longestStreak, tempStreak)\n              tempStreak = 1\n            }\n          }\n          prevDate = currentDate\n        }\n        longestStreak = Math.max(longestStreak, tempStreak)\n      }\n\n      return {\n        habits: state.habits.map((h) =>\n          h.id === habitId\n            ? {\n                ...h,\n                completedDates: newCompletedDates,\n                currentStreak,\n                longestStreak,\n              }\n            : h\n        ),\n      }\n    }),\n\n  getHabitStreak: (habitId) => {\n    const state = get()\n    const habit = state.habits.find((h) => h.id === habitId)\n    return habit?.currentStreak || 0\n  },\n\n  addGoal: (goal) =>\n    set((state) => {\n      const newGoal: Goal = {\n        ...goal,\n        id: Math.random().toString(36).substring(7),\n        createdAt: new Date(),\n        progress: 0,\n        status: \"active\",\n        milestones: goal.milestones || [],\n      }\n      return {\n        goals: [...state.goals, newGoal],\n      }\n    }),\n\n  deleteGoal: (id) =>\n    set((state) => ({\n      goals: state.goals.filter((g) => g.id !== id),\n    })),\n\n  updateGoal: (id, updates) =>\n    set((state) => {\n      const goal = state.goals.find((g) => g.id === id)\n      if (!goal) return state\n\n      const updatedGoal = { ...goal, ...updates }\n      \n      // Recalculate progress if milestones changed\n      if (updates.milestones !== undefined) {\n        const completedMilestones = updatedGoal.milestones.filter((m) => m.completed).length\n        updatedGoal.progress =\n          updatedGoal.milestones.length > 0\n            ? Math.round((completedMilestones / updatedGoal.milestones.length) * 100)\n            : 0\n\n        // Auto-update status if all milestones completed\n        if (updatedGoal.progress === 100 && updatedGoal.status === \"active\") {\n          updatedGoal.status = \"completed\"\n        }\n      }\n\n      return {\n        goals: state.goals.map((g) => (g.id === id ? updatedGoal : g)),\n      }\n    }),\n\n  addMilestone: (goalId, milestone) =>\n    set((state) => {\n      const goal = state.goals.find((g) => g.id === goalId)\n      if (!goal) return state\n\n      const maxOrder = goal.milestones.length > 0 ? Math.max(...goal.milestones.map((m) => m.order)) : -1\n      const newMilestone: Milestone = {\n        ...milestone,\n        id: Math.random().toString(36).substring(7),\n        order: maxOrder + 1,\n      }\n\n      const updatedMilestones = [...goal.milestones, newMilestone].sort((a, b) => a.order - b.order)\n      const completedMilestones = updatedMilestones.filter((m) => m.completed).length\n      const progress = updatedMilestones.length > 0 ? Math.round((completedMilestones / updatedMilestones.length) * 100) : 0\n\n      return {\n        goals: state.goals.map((g) =>\n          g.id === goalId\n            ? {\n                ...g,\n                milestones: updatedMilestones,\n                progress,\n                status: progress === 100 && g.status === \"active\" ? \"completed\" : g.status,\n              }\n            : g\n        ),\n      }\n    }),\n\n  updateMilestone: (goalId, milestoneId, updates) =>\n    set((state) => {\n      const goal = state.goals.find((g) => g.id === goalId)\n      if (!goal) return state\n\n      const updatedMilestones = goal.milestones.map((m) =>\n        m.id === milestoneId ? { ...m, ...updates } : m\n      )\n      const completedMilestones = updatedMilestones.filter((m) => m.completed).length\n      const progress = updatedMilestones.length > 0 ? Math.round((completedMilestones / updatedMilestones.length) * 100) : 0\n\n      return {\n        goals: state.goals.map((g) =>\n          g.id === goalId\n            ? {\n                ...g,\n                milestones: updatedMilestones,\n                progress,\n                status: progress === 100 && g.status === \"active\" ? \"completed\" : g.status,\n              }\n            : g\n        ),\n      }\n    }),\n\n  deleteMilestone: (goalId, milestoneId) =>\n    set((state) => {\n      const goal = state.goals.find((g) => g.id === goalId)\n      if (!goal) return state\n\n      const updatedMilestones = goal.milestones.filter((m) => m.id !== milestoneId)\n      const completedMilestones = updatedMilestones.filter((m) => m.completed).length\n      const progress = updatedMilestones.length > 0 ? Math.round((completedMilestones / updatedMilestones.length) * 100) : 0\n\n      return {\n        goals: state.goals.map((g) =>\n          g.id === goalId\n            ? {\n                ...g,\n                milestones: updatedMilestones,\n                progress,\n              }\n            : g\n        ),\n      }\n    }),\n\n  toggleMilestone: (goalId, milestoneId) =>\n    set((state) => {\n      const goal = state.goals.find((g) => g.id === goalId)\n      if (!goal) return state\n\n      const updatedMilestones = goal.milestones.map((m) => {\n        if (m.id === milestoneId) {\n          const today = new Date().toISOString().split(\"T\")[0]\n          return {\n            ...m,\n            completed: !m.completed,\n            completedDate: !m.completed ? today : undefined,\n          }\n        }\n        return m\n      })\n\n      const completedMilestones = updatedMilestones.filter((m) => m.completed).length\n      const progress = updatedMilestones.length > 0 ? Math.round((completedMilestones / updatedMilestones.length) * 100) : 0\n\n      return {\n        goals: state.goals.map((g) =>\n          g.id === goalId\n            ? {\n                ...g,\n                milestones: updatedMilestones,\n                progress,\n                status: progress === 100 && g.status === \"active\" ? \"completed\" : g.status,\n              }\n            : g\n        ),\n      }\n    }),\n\n  getGoalProgress: (goalId) => {\n    const state = get()\n    const goal = state.goals.find((g) => g.id === goalId)\n    return goal?.progress || 0\n  },\n\n  getAISuggestions: (goalId) => {\n    const state = get()\n    const goal = state.goals.find((g) => g.id === goalId)\n    if (!goal) return []\n\n    const suggestions: string[] = []\n    const completedMilestones = goal.milestones.filter((m) => m.completed).length\n    const totalMilestones = goal.milestones.length\n    const progress = goal.progress\n\n    // Progress-based suggestions\n    if (progress === 0) {\n      suggestions.push(\"Start by completing your first milestone to build momentum!\")\n      suggestions.push(\"Break down your first milestone into smaller daily tasks.\")\n    } else if (progress < 30) {\n      suggestions.push(\"You're just getting started! Focus on completing 1-2 milestones this week.\")\n      suggestions.push(\"Consider scheduling specific times for goal-related tasks.\")\n    } else if (progress < 50) {\n      suggestions.push(\"Great progress! You're almost halfway there. Keep the momentum going!\")\n      suggestions.push(\"Review your upcoming milestones and plan ahead.\")\n    } else if (progress < 80) {\n      suggestions.push(\"You're making excellent progress! Focus on the remaining milestones.\")\n      suggestions.push(\"Consider celebrating your progress so far to stay motivated.\")\n    } else if (progress < 100) {\n      suggestions.push(\"You're so close! Push through the final milestones to achieve your goal.\")\n      suggestions.push(\"Review what's worked well and apply it to the remaining tasks.\")\n    }\n\n    // Task integration suggestions\n    const relatedTasks = state.tasks.filter((t) => \n      t.title.toLowerCase().includes(goal.title.toLowerCase().split(\" \")[0].toLowerCase()) ||\n      goal.title.toLowerCase().includes(t.title.toLowerCase().split(\" \")[0].toLowerCase())\n    )\n    if (relatedTasks.length === 0) {\n      suggestions.push(\"Create tasks related to this goal to track daily progress.\")\n    } else {\n      const incompleteTasks = relatedTasks.filter((t) => !t.completed)\n      if (incompleteTasks.length > 0) {\n        suggestions.push(`You have ${incompleteTasks.length} related tasks. Complete them to advance your goal.`)\n      }\n    }\n\n    // Time-based suggestions\n    if (goal.targetDate) {\n      const targetDate = new Date(goal.targetDate)\n      const today = new Date()\n      const daysRemaining = Math.ceil((targetDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24))\n      const milestonesRemaining = totalMilestones - completedMilestones\n      \n      if (daysRemaining > 0 && milestonesRemaining > 0) {\n        const dailyMilestoneRate = milestonesRemaining / daysRemaining\n        if (dailyMilestoneRate > 0.5) {\n          suggestions.push(`You have ${daysRemaining} days left. Complete ${Math.ceil(dailyMilestoneRate)} milestone(s) per day to stay on track.`)\n        }\n      }\n    }\n\n    return suggestions.slice(0, 3) // Return top 3 suggestions\n  },\n\n  addDistraction: (distraction) =>\n    set((state) => {\n      const newDistraction: Distraction = {\n        ...distraction,\n        id: Math.random().toString(36).substring(7),\n        date: new Date(),\n      }\n      return {\n        distractions: [...state.distractions, newDistraction],\n      }\n    }),\n\n  deleteDistraction: (id) =>\n    set((state) => ({\n      distractions: state.distractions.filter((d) => d.id !== id),\n    })),\n\n  getDistractionInsights: () => {\n    const state = get()\n    const distractions = state.distractions\n\n    // Get top sources\n    const sourceCounts: Record<string, number> = {}\n    distractions.forEach((d) => {\n      sourceCounts[d.source] = (sourceCounts[d.source] || 0) + 1\n    })\n\n    const topSources = Object.entries(sourceCounts)\n      .map(([source, count]) => ({ source, count }))\n      .sort((a, b) => b.count - a.count)\n      .slice(0, 5)\n\n    // Calculate total time lost\n    const totalTime = distractions.reduce((sum, d) => sum + d.duration, 0)\n\n    // Generate patterns/insights\n    const patterns: string[] = []\n    const typeCounts: Record<string, number> = {}\n    distractions.forEach((d) => {\n      typeCounts[d.type] = (typeCounts[d.type] || 0) + 1\n    })\n\n    const mostCommonType = Object.entries(typeCounts).sort((a, b) => b[1] - a[1])[0]\n    if (mostCommonType) {\n      patterns.push(`Most common distraction type: ${mostCommonType[0]} (${mostCommonType[1]} times)`)\n    }\n\n    const avgDuration = distractions.length > 0 ? totalTime / distractions.length : 0\n    if (avgDuration > 10) {\n      patterns.push(`Average distraction duration is ${Math.round(avgDuration)} minutes - consider shorter breaks`)\n    }\n\n    if (topSources.length > 0) {\n      patterns.push(`Top distraction source: ${topSources[0].source} (${topSources[0].count} times)`)\n    }\n\n    const today = new Date()\n    today.setHours(0, 0, 0, 0)\n    const todayDistractions = distractions.filter((d) => {\n      const dDate = new Date(d.date)\n      dDate.setHours(0, 0, 0, 0)\n      return dDate.getTime() === today.getTime()\n    })\n    if (todayDistractions.length > 5) {\n      patterns.push(`You've had ${todayDistractions.length} distractions today - consider using blocking mode`)\n    }\n\n    return { topSources, totalTime, patterns }\n  },\n\n  addChallenge: (challenge) =>\n    set((state) => {\n      const newChallenge: Challenge = {\n        ...challenge,\n        id: Math.random().toString(36).substring(7),\n        current: 0,\n        completed: false,\n      }\n      return {\n        challenges: [...state.challenges, newChallenge],\n      }\n    }),\n\n  updateChallengeProgress: (challengeId) =>\n    set((state) => {\n      const challenge = state.challenges.find((c) => c.id === challengeId)\n      if (!challenge) return state\n\n      let current = 0\n      const today = new Date()\n      today.setHours(0, 0, 0, 0)\n\n      switch (challenge.metric) {\n        case \"focus_sessions\":\n          const sessionsInPeriod = state.focusSessions.filter((s) => {\n            const sessionDate = new Date(s.date)\n            sessionDate.setHours(0, 0, 0, 0)\n            return sessionDate >= challenge.startDate && sessionDate <= challenge.endDate\n          })\n          current = sessionsInPeriod.length\n          break\n        case \"tasks_completed\":\n          const tasksInPeriod = state.tasks.filter((t) => {\n            if (!t.completed) return false\n            const taskDate = new Date(t.createdAt)\n            taskDate.setHours(0, 0, 0, 0)\n            return taskDate >= challenge.startDate && taskDate <= challenge.endDate\n          })\n          current = tasksInPeriod.length\n          break\n        case \"habits_streak\":\n          const maxStreak = Math.max(...state.habits.map((h) => h.currentStreak), 0)\n          current = maxStreak\n          break\n        case \"goals_progress\":\n          const totalProgress = state.goals.reduce((sum, g) => sum + g.progress, 0)\n          current = Math.round(totalProgress / (state.goals.length || 1))\n          break\n      }\n\n      const completed = current >= challenge.target\n\n      return {\n        challenges: state.challenges.map((c) =>\n          c.id === challengeId\n            ? {\n                ...c,\n                current,\n                completed,\n              }\n            : c\n        ),\n      }\n    }),\n\n  checkAchievements: () =>\n    set((state) => {\n      const unlocked: Achievement[] = []\n\n      // Check focus achievements\n      if (state.focusSessions.length >= 1) {\n        const achievement = state.achievements.find((a) => a.id === \"first_focus\" && !a.unlockedAt)\n        if (achievement) {\n          unlocked.push({ ...achievement, unlockedAt: new Date() })\n        }\n      }\n      if (state.focusSessions.length >= 10) {\n        const achievement = state.achievements.find((a) => a.id === \"focus_master\" && !a.unlockedAt)\n        if (achievement) {\n          unlocked.push({ ...achievement, unlockedAt: new Date() })\n        }\n      }\n\n      // Check task achievements\n      const completedTasks = state.tasks.filter((t) => t.completed).length\n      if (completedTasks >= 50) {\n        const achievement = state.achievements.find((a) => a.id === \"task_warrior\" && !a.unlockedAt)\n        if (achievement) {\n          unlocked.push({ ...achievement, unlockedAt: new Date() })\n        }\n      }\n\n      // Check habit achievements\n      const maxStreak = Math.max(...state.habits.map((h) => h.currentStreak), 0)\n      if (maxStreak >= 7) {\n        const achievement = state.achievements.find((a) => a.id === \"habit_hero\" && !a.unlockedAt)\n        if (achievement) {\n          unlocked.push({ ...achievement, unlockedAt: new Date() })\n        }\n      }\n\n      // Check goal achievements\n      const completedGoals = state.goals.filter((g) => g.status === \"completed\").length\n      if (completedGoals >= 1) {\n        const achievement = state.achievements.find((a) => a.id === \"goal_getter\" && !a.unlockedAt)\n        if (achievement) {\n          unlocked.push({ ...achievement, unlockedAt: new Date() })\n        }\n      }\n\n      // Check streak achievements\n      if (state.analytics.streakDays >= 30) {\n        const achievement = state.achievements.find((a) => a.id === \"streak_king\" && !a.unlockedAt)\n        if (achievement) {\n          unlocked.push({ ...achievement, unlockedAt: new Date() })\n        }\n      }\n\n      // Check milestone achievements\n      const totalMilestones = state.goals.reduce((sum, g) => {\n        return sum + g.milestones.filter((m) => m.completed).length\n      }, 0)\n      if (totalMilestones >= 10) {\n        const achievement = state.achievements.find((a) => a.id === \"milestone_master\" && !a.unlockedAt)\n        if (achievement) {\n          unlocked.push({ ...achievement, unlockedAt: new Date() })\n        }\n      }\n\n      if (unlocked.length > 0) {\n        return {\n          achievements: state.achievements.map((a) => {\n            const unlockedAchievement = unlocked.find((u) => u.id === a.id)\n            return unlockedAchievement || a\n          }),\n        }\n      }\n\n      return state\n    }),\n\n  getUnlockedAchievements: () => {\n    const state = get()\n    return state.achievements.filter((a) => a.unlockedAt !== undefined)\n  },\n\n  getLeaderboard: () => {\n    const state = get()\n    // Simulated leaderboard - in real app, this would come from backend\n    const score =\n      state.focusSessions.length * 10 +\n      state.tasks.filter((t) => t.completed).length * 5 +\n      state.habits.reduce((sum, h) => sum + h.currentStreak, 0) * 3 +\n      state.goals.filter((g) => g.status === \"completed\").length * 50\n\n    return [\n      { userId: \"you\", score, rank: 1 },\n      { userId: \"user2\", score: score - 50, rank: 2 },\n      { userId: \"user3\", score: score - 100, rank: 3 },\n    ]\n  },\n\n  setCurrentSchedule: (schedule) =>\n    set({\n      currentSchedule: schedule,\n    }),\n\n  acceptSchedule: () =>\n    set((state) => ({\n      acceptedSchedules: [...state.acceptedSchedules, state.currentSchedule],\n    })),\n\n  getAcceptedSchedules: () => {\n    const state = get()\n    return state.acceptedSchedules\n  },\n\n  addTimeBlock: (block) =>\n    set((state) => {\n      const newBlock: TimeBlock = {\n        ...block,\n        id: Math.random().toString(36).substring(7),\n      }\n      return {\n        timeBlocks: [...state.timeBlocks, newBlock],\n      }\n    }),\n\n  updateTimeBlock: (id, updates) =>\n    set((state) => ({\n      timeBlocks: state.timeBlocks.map((b) => (b.id === id ? { ...b, ...updates } : b)),\n    })),\n\n  deleteTimeBlock: (id) =>\n    set((state) => ({\n      timeBlocks: state.timeBlocks.filter((b) => b.id !== id),\n    })),\n\n  getTimeBlocksForDate: (date) => {\n    const state = get()\n    return state.timeBlocks.filter((b) => b.date === date).sort((a, b) => a.startTime.localeCompare(b.startTime))\n  },\n\n  moveTimeBlock: (id, newDate, newStartTime) =>\n    set((state) => {\n      const block = state.timeBlocks.find((b) => b.id === id)\n      if (!block) return state\n\n      const startMinutes = parseInt(newStartTime.split(\":\")[0]) * 60 + parseInt(newStartTime.split(\":\")[1])\n      const endMinutes = parseInt(block.endTime.split(\":\")[0]) * 60 + parseInt(block.endTime.split(\":\")[1])\n      const duration = endMinutes - (parseInt(block.startTime.split(\":\")[0]) * 60 + parseInt(block.startTime.split(\":\")[1]))\n      const newEndMinutes = startMinutes + duration\n      const newEndTime = `${Math.floor(newEndMinutes / 60).toString().padStart(2, \"0\")}:${(newEndMinutes % 60).toString().padStart(2, \"0\")}`\n\n      return {\n        timeBlocks: state.timeBlocks.map((b) =>\n          b.id === id\n            ? {\n                ...b,\n                date: newDate,\n                startTime: newStartTime,\n                endTime: newEndTime,\n              }\n            : b\n        ),\n      }\n    }),\n\n  addSoundPreset: (preset) =>\n    set((state) => {\n      const newPreset: SoundPreset = {\n        ...preset,\n        id: Math.random().toString(36).substring(7),\n      }\n      return {\n        soundPresets: [...state.soundPresets, newPreset],\n      }\n    }),\n\n  addPlaylist: (playlist) =>\n    set((state) => {\n      const newPlaylist: Playlist = {\n        ...playlist,\n        id: Math.random().toString(36).substring(7),\n        createdAt: new Date(),\n      }\n      return {\n        playlists: [...state.playlists, newPlaylist],\n      }\n    }),\n\n  deletePlaylist: (id) =>\n    set((state) => ({\n      playlists: state.playlists.filter((p) => p.id !== id),\n      currentPlaylist: state.currentPlaylist === id ? undefined : state.currentPlaylist,\n    })),\n\n  setCurrentPlaylist: (id) =>\n    set({\n      currentPlaylist: id,\n    }),\n\n  generateWeeklyReport: () => {\n    const state = get()\n    const today = new Date()\n    const weekStart = new Date(today)\n    weekStart.setDate(today.getDate() - today.getDay())\n\n    const weekTasks = state.tasks.filter((t) => {\n      const taskDate = new Date(t.createdAt)\n      return taskDate >= weekStart && taskDate <= today\n    })\n\n    const weekSessions = state.focusSessions.filter((s) => {\n      const sessionDate = new Date(s.date)\n      return sessionDate >= weekStart && sessionDate <= today\n    })\n\n    const summary = `Weekly Report (${weekStart.toLocaleDateString()} - ${today.toLocaleDateString()})\n    \nFocus Sessions: ${weekSessions.length}\nTotal Focus Time: ${weekSessions.reduce((sum, s) => sum + s.duration, 0)} minutes\nTasks Completed: ${weekTasks.filter((t) => t.completed).length} / ${weekTasks.length}\nHabits Maintained: ${state.habits.filter((h) => h.currentStreak > 0).length}\nGoals Progress: ${state.goals.filter((g) => g.status === \"active\").length} active goals\nDistractions: ${state.distractions.filter((d) => {\n      const dDate = new Date(d.date)\n      return dDate >= weekStart && dDate <= today\n    }).length}`\n\n    return {\n      summary,\n      data: {\n        focusSessions: weekSessions.length,\n        focusTime: weekSessions.reduce((sum, s) => sum + s.duration, 0),\n        tasksCompleted: weekTasks.filter((t) => t.completed).length,\n        tasksTotal: weekTasks.length,\n        habitsActive: state.habits.filter((h) => h.currentStreak > 0).length,\n        goalsActive: state.goals.filter((g) => g.status === \"active\").length,\n        distractions: state.distractions.filter((d) => {\n          const dDate = new Date(d.date)\n          return dDate >= weekStart && dDate <= today\n        }).length,\n      },\n    }\n  },\n\n  generateMonthlyReport: () => {\n    const state = get()\n    const today = new Date()\n    const monthStart = new Date(today.getFullYear(), today.getMonth(), 1)\n\n    const monthTasks = state.tasks.filter((t) => {\n      const taskDate = new Date(t.createdAt)\n      return taskDate >= monthStart && taskDate <= today\n    })\n\n    const monthSessions = state.focusSessions.filter((s) => {\n      const sessionDate = new Date(s.date)\n      return sessionDate >= monthStart && sessionDate <= today\n    })\n\n    const summary = `Monthly Report (${monthStart.toLocaleDateString()} - ${today.toLocaleDateString()})\n    \nFocus Sessions: ${monthSessions.length}\nTotal Focus Time: ${Math.round(monthSessions.reduce((sum, s) => sum + s.duration, 0) / 60)} hours\nTasks Completed: ${monthTasks.filter((t) => t.completed).length} / ${monthTasks.length}\nHabits Maintained: ${state.habits.filter((h) => h.currentStreak > 0).length}\nGoals Completed: ${state.goals.filter((g) => g.status === \"completed\").length}\nAchievements Unlocked: ${state.achievements.filter((a) => a.unlockedAt).length}\nChallenges Completed: ${state.challenges.filter((c) => c.completed).length}`\n\n    return {\n      summary,\n      data: {\n        focusSessions: monthSessions.length,\n        focusTime: Math.round(monthSessions.reduce((sum, s) => sum + s.duration, 0) / 60),\n        tasksCompleted: monthTasks.filter((t) => t.completed).length,\n        tasksTotal: monthTasks.length,\n        habitsActive: state.habits.filter((h) => h.currentStreak > 0).length,\n        goalsCompleted: state.goals.filter((g) => g.status === \"completed\").length,\n        achievements: state.achievements.filter((a) => a.unlockedAt).length,\n        challengesCompleted: state.challenges.filter((c) => c.completed).length,\n      },\n    }\n  },\n\n  exportToCSV: () => {\n    const state = get()\n    const headers = [\"Date\", \"Focus Sessions\", \"Tasks Completed\", \"Habits Streak\", \"Goals Progress\"]\n    const rows: string[] = []\n\n    // Group by date\n    const dateMap: Record<string, any> = {}\n    state.focusSessions.forEach((s) => {\n      const date = new Date(s.date).toISOString().split(\"T\")[0]\n      if (!dateMap[date]) dateMap[date] = { date, focusSessions: 0, tasks: 0, habits: 0, goals: 0 }\n      dateMap[date].focusSessions++\n    })\n\n    state.tasks.filter((t) => t.completed).forEach((t) => {\n      const date = new Date(t.createdAt).toISOString().split(\"T\")[0]\n      if (!dateMap[date]) dateMap[date] = { date, focusSessions: 0, tasks: 0, habits: 0, goals: 0 }\n      dateMap[date].tasks++\n    })\n\n    Object.values(dateMap).forEach((row) => {\n      rows.push(`${row.date},${row.focusSessions},${row.tasks},${row.habits},${row.goals}`)\n    })\n\n    return [headers.join(\",\"), ...rows].join(\"\\n\")\n  },\n\n  exportToPDF: () => {\n    // In a real app, this would use a PDF library like jsPDF\n    // For now, we'll create a downloadable text file\n    const state = get()\n    const weeklyReport = state.generateWeeklyReport()\n    const monthlyReport = state.generateMonthlyReport()\n\n    const content = `PULSE PRODUCTIVITY REPORT\nGenerated: ${new Date().toLocaleDateString()}\n\n${weeklyReport.summary}\n\n${monthlyReport.summary}\n\n---\nFor detailed analytics, visit the Analytics dashboard.\n`\n\n    const blob = new Blob([content], { type: \"text/plain\" })\n    const url = URL.createObjectURL(blob)\n    const a = document.createElement(\"a\")\n    a.href = url\n    a.download = `pulse-report-${new Date().toISOString().split(\"T\")[0]}.txt`\n    document.body.appendChild(a)\n    a.click()\n    document.body.removeChild(a)\n    URL.revokeObjectURL(url)\n  },\n\n  addTeamMember: (member) =>\n    set((state) => {\n      const newMember: TeamMember = {\n        ...member,\n        id: Math.random().toString(36).substring(7),\n        joinedAt: new Date(),\n      }\n      return {\n        teamMembers: [...state.teamMembers, newMember],\n      }\n    }),\n\n  shareGoal: (goalId, memberIds) =>\n    set((state) => {\n      const existingShare = state.sharedGoals.find((sg) => sg.goalId === goalId)\n      if (existingShare) {\n        return {\n          sharedGoals: state.sharedGoals.map((sg) =>\n            sg.goalId === goalId\n              ? {\n                  ...sg,\n                  sharedWith: [...new Set([...sg.sharedWith, ...memberIds])],\n                }\n              : sg\n          ),\n        }\n      }\n      const newShare: SharedGoal = {\n        id: Math.random().toString(36).substring(7),\n        goalId,\n        sharedWith: memberIds,\n        sharedAt: new Date(),\n      }\n      return {\n        sharedGoals: [...state.sharedGoals, newShare],\n      }\n    }),\n\n  createGroupChallenge: (challenge) =>\n    set((state) => {\n      const newChallenge: GroupChallenge = {\n        ...challenge,\n        id: Math.random().toString(36).substring(7),\n        leaderboard: challenge.participants.map((userId) => ({ userId, score: 0 })),\n      }\n      return {\n        groupChallenges: [...state.groupChallenges, newChallenge],\n      }\n    }),\n\n  getTeamProductivityInsights: () => {\n    const state = get()\n    // Simulated team data - in real app, this would aggregate from all team members\n    const totalFocusTime = state.focusSessions.reduce((sum, s) => sum + s.duration, 0)\n    const totalTasks = state.tasks.length\n    const averageProgress = state.goals.length > 0 ? state.goals.reduce((sum, g) => sum + g.progress, 0) / state.goals.length : 0\n\n    return {\n      totalFocusTime,\n      totalTasks,\n      averageProgress: Math.round(averageProgress),\n    }\n  },\n\n  addNotification: (notification) =>\n    set((state) => {\n      const newNotification: Notification = {\n        ...notification,\n        id: Math.random().toString(36).substring(7),\n        timestamp: new Date(),\n        read: false,\n      }\n      return {\n        notifications: [newNotification, ...state.notifications],\n      }\n    }),\n\n  markNotificationRead: (id) =>\n    set((state) => ({\n      notifications: state.notifications.map((n) => (n.id === id ? { ...n, read: true } : n)),\n    })),\n\n  clearNotifications: () =>\n    set({\n      notifications: [],\n    }),\n\n  getUnreadNotifications: () => {\n    const state = get()\n    return state.notifications.filter((n) => !n.read)\n  },\n\n  checkSmartNotifications: () => {\n    const state = get()\n    const now = new Date()\n    const lastSession = state.focusSessions[state.focusSessions.length - 1]\n\n    // Break suggestion - if last session was more than 25 minutes ago and no break taken\n    if (lastSession) {\n      const sessionTime = new Date(lastSession.date).getTime()\n      const timeSinceSession = (now.getTime() - sessionTime) / (1000 * 60) // minutes\n      if (timeSinceSession >= 25 && timeSinceSession < 30) {\n        const hasRecentBreak = state.distractions.some((d) => {\n          const distTime = new Date(d.date).getTime()\n          return distTime > sessionTime && d.type === \"other\" && d.source.toLowerCase().includes(\"break\")\n        })\n        if (!hasRecentBreak) {\n          state.addNotification({\n            type: \"suggestion\",\n            title: \"Time for a Break!\",\n            message: \"You've been focusing for a while. Take a 5-minute break to recharge.\",\n            actionUrl: \"/dashboard\",\n          })\n        }\n      }\n    }\n\n    // Goal milestone celebration\n    state.goals.forEach((goal) => {\n      const recentMilestones = goal.milestones.filter((m) => {\n        if (!m.completedDate) return false\n        const completedTime = new Date(m.completedDate).getTime()\n        return now.getTime() - completedTime < 60000 // Within last minute\n      })\n      if (recentMilestones.length > 0) {\n        state.addNotification({\n          type: \"celebration\",\n          title: \"Milestone Achieved! ðŸŽ‰\",\n          message: `You completed \"${recentMilestones[0].title}\" for \"${goal.title}\"`,\n          actionUrl: \"/goals\",\n        })\n      }\n    })\n\n    // Context-aware reminders\n    const todayTasks = state.tasks.filter((t) => {\n      if (t.completed) return false\n      const taskDate = new Date(t.createdAt)\n      return taskDate.toDateString() === now.toDateString()\n    })\n    if (todayTasks.length > 0 && now.getHours() === 9 && now.getMinutes() < 5) {\n      state.addNotification({\n        type: \"reminder\",\n        title: \"Good Morning!\",\n        message: `You have ${todayTasks.length} task${todayTasks.length > 1 ? \"s\" : \"\"} to complete today.`,\n        actionUrl: \"/tasks\",\n      })\n    }\n  },\n\n  setVoiceActive: (active) =>\n    set({\n      isVoiceActive: active,\n    }),\n\n  processVoiceCommand: (command) => {\n    const state = get()\n    const lowerCommand = command.toLowerCase().trim()\n\n    // Task capture\n    if (lowerCommand.includes(\"add task\") || lowerCommand.includes(\"create task\") || lowerCommand.includes(\"new task\")) {\n      const taskText = command.replace(/add task|create task|new task/gi, \"\").trim()\n      if (taskText) {\n        state.addTask({\n          title: taskText,\n          priority: \"medium\",\n          timeEstimate: 30,\n        })\n        state.addNotification({\n          type: \"reminder\",\n          title: \"Task Added\",\n          message: `\"${taskText}\" has been added to your tasks.`,\n        })\n      }\n    }\n\n    // Start focus session\n    if (lowerCommand.includes(\"start focus\") || lowerCommand.includes(\"begin focus\") || lowerCommand.includes(\"focus session\")) {\n      const duration = 25 // Default\n      state.addFocusSession(duration)\n      state.addNotification({\n        type: \"reminder\",\n        title: \"Focus Session Started\",\n        message: `Started a ${duration}-minute focus session.`,\n      })\n    }\n\n    // Log mood\n    if (lowerCommand.includes(\"mood\") || lowerCommand.includes(\"feeling\")) {\n      let mood: \"excellent\" | \"good\" | \"neutral\" | \"sad\" | \"very-sad\" = \"neutral\"\n      if (lowerCommand.includes(\"excellent\") || lowerCommand.includes(\"great\") || lowerCommand.includes(\"amazing\")) {\n        mood = \"excellent\"\n      } else if (lowerCommand.includes(\"good\") || lowerCommand.includes(\"fine\") || lowerCommand.includes(\"okay\")) {\n        mood = \"good\"\n      } else if (lowerCommand.includes(\"sad\") || lowerCommand.includes(\"bad\") || lowerCommand.includes(\"terrible\")) {\n        mood = \"sad\"\n      } else if (lowerCommand.includes(\"very sad\") || lowerCommand.includes(\"awful\")) {\n        mood = \"very-sad\"\n      }\n      const notes = command.replace(/mood|feeling/gi, \"\").trim()\n      state.addMoodEntry(mood, notes || \"\")\n      state.addNotification({\n        type: \"reminder\",\n        title: \"Mood Logged\",\n        message: `Your mood has been recorded as \"${mood}\".`,\n      })\n    }\n  },\n\n  // Add auth actions\n  setAuth: (isAuthenticated, userEmail = \"\") =>\n    set({\n      auth: {\n        isAuthenticated,\n        userEmail,\n      },\n    }),\n\n  logout: async () => {\n    try {\n      const api = await import(\"./api\")\n      api.authAPI.logout()\n    } catch (error) {\n      console.error(\"Error during logout:\", error)\n    }\n    set({\n      auth: {\n        isAuthenticated: false,\n        userEmail: \"\",\n      },\n      tasks: [],\n      habits: [],\n      goals: [],\n      focusSessions: [],\n      distractions: [],\n      challenges: [],\n      timeBlocks: [],\n      notifications: [],\n    })\n  },\n}))\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAgVO,MAAM,WAAW,IAAA,qJAAM,EAAa,CAAC,KAAK,MAAQ,CAAC;QACxD,UAAU;QACV,WAAW,EAAE;QACb,UAAU;QACV,iBAAiB;YACf,eAAe;YACf,eAAe;YACf,WAAW;YACX,OAAO;YACP,cAAc;QAChB;QAEA,aAAa;QACb,kBAAkB;QAClB,mBAAmB,CAAC,SAAW,IAAI;gBAAE,kBAAkB;YAAO;QAC9D,kBAAkB;YAChB,cAAc;YACd,aAAa;gBAAC;gBAAa;gBAAU;aAAU;QACjD;QACA,iBAAiB,CAAC,OAChB,IAAI,CAAC,QAAU,CAAC;oBACd,kBAAkB;wBAAE,GAAG,MAAM,gBAAgB;wBAAE,cAAc;oBAAK;gBACpE,CAAC;QACH,eAAe,CAAC,UACd,IAAI,CAAC,QAAU,CAAC;oBACd,kBAAkB;wBAChB,GAAG,MAAM,gBAAgB;wBACzB,aAAa;+BAAI,MAAM,gBAAgB,CAAC,WAAW;4BAAE;yBAAQ;oBAC/D;gBACF,CAAC;QACH,kBAAkB,CAAC,UACjB,IAAI,CAAC,QAAU,CAAC;oBACd,kBAAkB;wBAChB,GAAG,MAAM,gBAAgB;wBACzB,aAAa,MAAM,gBAAgB,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC,MAAQ,QAAQ;oBAC1E;gBACF,CAAC;QACH,OAAO,EAAE;QACT,eAAe,EAAE;QACjB,cAAc,EAAE;QAChB,YAAY,EAAE;QACd,cAAc;YACZ;gBACE,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,MAAM;gBACN,UAAU;YACZ;YACA;gBACE,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,MAAM;gBACN,UAAU;YACZ;YACA;gBACE,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,MAAM;gBACN,UAAU;YACZ;YACA;gBACE,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,MAAM;gBACN,UAAU;YACZ;YACA;gBACE,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,MAAM;gBACN,UAAU;YACZ;YACA;gBACE,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,MAAM;gBACN,UAAU;YACZ;YACA;gBACE,IAAI;gBACJ,OAAO;gBACP,aAAa;gBACb,MAAM;gBACN,UAAU;YACZ;SACD;QACD,WAAW;YACT,iBAAiB;YACjB,gBAAgB;YAChB,qBAAqB;YACrB,wBAAwB;YACxB,kBAAkB;YAClB,YAAY;YACZ,gBAAgB;YAChB,eAAe,EAAE;QACnB;QACA,aAAa,EAAE;QACf,QAAQ,EAAE;QACV,OAAO,EAAE;QACT,iBAAiB,EAAE;QACnB,mBAAmB,EAAE;QACrB,YAAY,EAAE;QACd,cAAc;YACZ;gBACE,IAAI;gBACJ,MAAM;gBACN,MAAM;gBACN,MAAM;YACR;YACA;gBACE,IAAI;gBACJ,MAAM;gBACN,MAAM;gBACN,MAAM;YACR;YACA;gBACE,IAAI;gBACJ,MAAM;gBACN,MAAM;gBACN,MAAM;YACR;YACA;gBACE,IAAI;gBACJ,MAAM;gBACN,MAAM;gBACN,MAAM;YACR;YACA;gBACE,IAAI;gBACJ,MAAM;gBACN,MAAM;gBACN,MAAM;YACR;YACA;gBACE,IAAI;gBACJ,MAAM;gBACN,MAAM;gBACN,MAAM;YACR;SACD;QACD,WAAW,EAAE;QACb,iBAAiB;QACjB,aAAa,EAAE;QACf,aAAa,EAAE;QACf,iBAAiB,EAAE;QACnB,eAAe,EAAE;QACjB,eAAe;QAEf,MAAM;YACJ,iBAAiB;YACjB,WAAW;QACb;QAEA,SAAS,OAAO;YACd,IAAI;gBACF,MAAM,MAAM;gBACZ,qDAAqD;gBACrD,MAAM,UAAe;oBACnB,OAAO,KAAK,KAAK;oBACjB,aAAa,KAAK,WAAW,IAAI;oBACjC,UAAU,KAAK,QAAQ;oBACvB,eAAe,KAAK,YAAY;oBAChC,UAAU,KAAK,QAAQ;oBACvB,YAAY,KAAK,SAAS,IAAI;gBAChC;gBAEA,4CAA4C;gBAC5C,IAAI,KAAK,OAAO,EAAE;oBAChB,yEAAyE;oBACzE,MAAM,UAAU,IAAI,KAAK,KAAK,OAAO;oBACrC,IAAI,CAAC,MAAM,QAAQ,OAAO,KAAK;wBAC7B,QAAQ,QAAQ,GAAG,QAAQ,WAAW;oBACxC;gBACF;gBAEA,MAAM,UAAW,MAAM,IAAI,QAAQ,CAAC,MAAM,CAAC;gBAE3C,yCAAyC;gBACzC,IAAI,CAAC,QAAU,CAAC;wBACd,OAAO;+BACF,MAAM,KAAK;4BACd;gCACE,IAAI,QAAQ,EAAE;gCACd,OAAO,QAAQ,KAAK;gCACpB,aAAa,QAAQ,WAAW,IAAI;gCACpC,UAAU,QAAQ,QAAQ;gCAC1B,cAAc,QAAQ,aAAa,IAAI;gCACvC,WAAW,QAAQ,SAAS,IAAI;gCAChC,WAAW,IAAI,KAAK,QAAQ,UAAU;gCACtC,UAAU,QAAQ,QAAQ;gCAC1B,SAAS,QAAQ,QAAQ,GAAG,IAAI,KAAK,QAAQ,QAAQ,EAAE,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG;gCACrF,WAAW,QAAQ,UAAU,IAAI;4BACnC;yBACD;oBACH,CAAC;YACH,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,iCAAiC;gBAC/C,0DAA0D;gBAC1D,IAAI,CAAC;oBACH,MAAM,UAAU;wBACd,GAAG,IAAI;wBACP,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;wBACzC,WAAW;wBACX,WAAW,IAAI;oBACjB;oBACA,OAAO;wBACL,OAAO;+BAAI,MAAM,KAAK;4BAAE;yBAAQ;oBAClC;gBACF;YACF;QACF;QAEA,YAAY,OAAO;YACjB,IAAI;gBACF,MAAM,MAAM;gBACZ,MAAM,IAAI,QAAQ,CAAC,MAAM,CAAC;YAC5B,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,mCAAmC;YACnD;YACA,IAAI,CAAC,QAAU,CAAC;oBACd,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBAC5C,CAAC;QACH;QAEA,YAAY,OAAO;YACjB,MAAM,QAAQ;YACd,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;YAC9C,IAAI,MAAM;gBACR,IAAI;oBACF,MAAM,MAAM;oBACZ,MAAM,IAAI,QAAQ,CAAC,MAAM,CAAC,IAAI;wBAAE,WAAW,CAAC,KAAK,SAAS;oBAAC;gBAC7D,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,iCAAiC;gBACjD;YACF;YACA,IAAI,CAAC,QAAU,CAAC;oBACd,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK;4BAAE,GAAG,CAAC;4BAAE,WAAW,CAAC,EAAE,SAAS;wBAAC,IAAI;gBACnF,CAAC;QACH;QAEA,YAAY,OAAO,IAAI;YACrB,IAAI;gBACF,MAAM,MAAM;gBACZ,MAAM,aAAkB,CAAC;gBACzB,IAAI,QAAQ,YAAY,KAAK,WAAW,WAAW,aAAa,GAAG,QAAQ,YAAY;gBACvF,IAAI,QAAQ,OAAO,KAAK,WAAW,WAAW,QAAQ,GAAG,QAAQ,OAAO;gBACxE,IAAI,QAAQ,SAAS,KAAK,WAAW,WAAW,UAAU,GAAG,QAAQ,SAAS;gBAC9E,IAAI,QAAQ,SAAS,KAAK,WAAW,WAAW,SAAS,GAAG,QAAQ,SAAS;gBAC7E,IAAI,QAAQ,KAAK,KAAK,WAAW,WAAW,KAAK,GAAG,QAAQ,KAAK;gBACjE,IAAI,QAAQ,WAAW,KAAK,WAAW,WAAW,WAAW,GAAG,QAAQ,WAAW;gBACnF,IAAI,QAAQ,QAAQ,KAAK,WAAW,WAAW,QAAQ,GAAG,QAAQ,QAAQ;gBAC1E,IAAI,QAAQ,QAAQ,KAAK,WAAW,WAAW,QAAQ,GAAG,QAAQ,QAAQ;gBAE1E,MAAM,IAAI,QAAQ,CAAC,MAAM,CAAC,IAAI;YAChC,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,iCAAiC;YACjD;YACA,IAAI,CAAC,QAAU,CAAC;oBACd,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK;4BAAE,GAAG,CAAC;4BAAE,GAAG,OAAO;wBAAC,IAAI;gBACtE,CAAC;QACH;QAEA,iBAAiB,OAAO;YACtB,IAAI;gBACF,MAAM,MAAM;gBACZ,MAAM,IAAI,gBAAgB,CAAC,MAAM,CAAC;oBAAE;oBAAU,WAAW;gBAAK;YAChE,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,0CAA0C;YAC1D;YAEA,IAAI,CAAC;gBACH,MAAM,aAA2B;oBAC/B,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;oBACzC;oBACA,MAAM,IAAI;oBACV,WAAW;gBACb;gBAEA,MAAM,kBAAkB;uBAAI,MAAM,aAAa;oBAAE;iBAAW;gBAE5D,MAAM,QAAQ,IAAI;gBAClB,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;gBAExB,MAAM,gBAAgB,gBAAgB,MAAM,CAAC,CAAC;oBAC5C,MAAM,cAAc,IAAI,KAAK,EAAE,IAAI;oBACnC,YAAY,QAAQ,CAAC,GAAG,GAAG,GAAG;oBAC9B,OAAO,YAAY,OAAO,OAAO,MAAM,OAAO;gBAChD;gBAEA,MAAM,gBAAgB,IAAI,KAAK;gBAC/B,cAAc,OAAO,CAAC,MAAM,OAAO,KAAK,MAAM,MAAM;gBAEpD,MAAM,YAAY,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC;oBACpC,MAAM,WAAW,IAAI,KAAK,EAAE,SAAS;oBACrC,SAAS,QAAQ,CAAC,GAAG,GAAG,GAAG;oBAC3B,OAAO,YAAY,iBAAiB,EAAE,SAAS;gBACjD;gBAEA,MAAM,oBAAoB,gBAAgB,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,QAAQ,EAAE;gBAC/E,MAAM,kBAAkB,KAAK,KAAK,CAAC,AAAC,oBAAoB,KAAM,MAAM;gBACpE,MAAM,mBACJ,gBAAgB,MAAM,GAAG,IAAI,KAAK,KAAK,CAAC,AAAC,oBAAoB,gBAAgB,MAAM,GAAI,MAAM,KAAK;gBAEpG,MAAM,iBAAiB,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC;oBACzC,MAAM,WAAW,IAAI,KAAK,EAAE,SAAS;oBACrC,SAAS,QAAQ,CAAC,GAAG,GAAG,GAAG;oBAC3B,OAAO,SAAS,OAAO,OAAO,MAAM,OAAO,MAAM,EAAE,SAAS;gBAC9D,GAAG,MAAM;gBAET,OAAO;oBACL,eAAe;oBACf,WAAW;wBACT;wBACA,gBAAgB;wBAChB,qBAAqB;wBACrB,wBAAwB,UAAU,MAAM;wBACxC;wBACA,YAAY,gBAAgB,MAAM,GAAG,IAAI,KAAK,GAAG,CAAC,gBAAgB,MAAM,EAAE,MAAM;wBAChF,gBAAgB,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM;wBAC7D,eAAe;oBACjB;gBACF;YACF;QACF;QAEA,cAAc;YACZ,MAAM,QAAQ;YACd,OAAO,MAAM,SAAS;QACxB;QAEA,aAAa,CAAC,WACZ,IAAI,CAAC,QAAU,CAAC;oBACd,iBAAiB;wBAAE,GAAG,MAAM,eAAe;wBAAE,GAAG,QAAQ;oBAAC;gBAC3D,CAAC;QAEH,aAAa,CAAC,MAAM,OAAO,OACzB,IAAI;gBACF,UAAU;gBACV,WAAW;gBACX,UAAU;oBAAE;oBAAM;gBAAK;YACzB;QAEF,gBAAgB,CAAC,OAAS,IAAI;gBAAE,aAAa;YAAK;QAElD,cAAc,CAAC,MAAM,QACnB,IAAI,CAAC;gBACH,MAAM,WAAsB;oBAC1B,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;oBACzC;oBACA;oBACA,MAAM,IAAI;gBACZ;gBACA,OAAO;oBACL,aAAa;2BAAI,MAAM,WAAW;wBAAE;qBAAS;gBAC/C;YACF;QAEF,gBAAgB;YACd,MAAM,QAAQ;YACd,OAAO,MAAM,WAAW;QAC1B;QAEA,UAAU,CAAC,QACT,IAAI,CAAC;gBACH,MAAM,WAAkB;oBACtB,GAAG,KAAK;oBACR,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;oBACzC,WAAW,IAAI;oBACf,gBAAgB,EAAE;oBAClB,eAAe;oBACf,eAAe;gBACjB;gBACA,OAAO;oBACL,QAAQ;2BAAI,MAAM,MAAM;wBAAE;qBAAS;gBACrC;YACF;QAEF,aAAa,CAAC,KACZ,IAAI,CAAC,QAAU,CAAC;oBACd,QAAQ,MAAM,MAAM,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBAC9C,CAAC;QAEH,uBAAuB,CAAC,SAAS,OAC/B,IAAI,CAAC;gBACH,MAAM,QAAQ,MAAM,MAAM,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBAChD,IAAI,CAAC,OAAO,OAAO;gBAEnB,MAAM,UAAU;gBAChB,MAAM,cAAc,MAAM,cAAc,CAAC,QAAQ,CAAC;gBAClD,MAAM,oBAAoB,cACtB,MAAM,cAAc,CAAC,MAAM,CAAC,CAAC,IAAM,MAAM,WACzC;uBAAI,MAAM,cAAc;oBAAE;iBAAQ,CAAC,IAAI;gBAE3C,oBAAoB;gBACpB,MAAM,QAAQ,IAAI;gBAClB,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;gBACxB,MAAM,WAAW,MAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;gBAElD,IAAI,gBAAgB;gBACpB,IAAI,gBAAgB,MAAM,aAAa;gBAEvC,IAAI,kBAAkB,MAAM,GAAG,GAAG;oBAChC,2BAA2B;oBAC3B,MAAM,cAAc;2BAAI;qBAAkB,CAAC,IAAI,GAAG,OAAO;oBACzD,IAAI,YAAY,IAAI,KAAK;oBAEzB,KAAK,MAAM,WAAW,YAAa;wBACjC,MAAM,eAAe,UAAU,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;wBAC1D,IAAI,YAAY,cAAc;4BAC5B;4BACA,UAAU,OAAO,CAAC,UAAU,OAAO,KAAK;wBAC1C,OAAO;4BACL;wBACF;oBACF;oBAEA,2BAA2B;oBAC3B,IAAI,aAAa;oBACjB,IAAI,WAAwB;oBAC5B,KAAK,MAAM,WAAW,YAAa;wBACjC,MAAM,cAAc,IAAI,KAAK;wBAC7B,IAAI,aAAa,MAAM;4BACrB,aAAa;wBACf,OAAO;4BACL,MAAM,WAAW,KAAK,KAAK,CAAC,CAAC,SAAS,OAAO,KAAK,YAAY,OAAO,EAAE,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;4BAC/F,IAAI,aAAa,GAAG;gCAClB;4BACF,OAAO;gCACL,gBAAgB,KAAK,GAAG,CAAC,eAAe;gCACxC,aAAa;4BACf;wBACF;wBACA,WAAW;oBACb;oBACA,gBAAgB,KAAK,GAAG,CAAC,eAAe;gBAC1C;gBAEA,OAAO;oBACL,QAAQ,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,IACxB,EAAE,EAAE,KAAK,UACL;4BACE,GAAG,CAAC;4BACJ,gBAAgB;4BAChB;4BACA;wBACF,IACA;gBAER;YACF;QAEF,gBAAgB,CAAC;YACf,MAAM,QAAQ;YACd,MAAM,QAAQ,MAAM,MAAM,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;YAChD,OAAO,OAAO,iBAAiB;QACjC;QAEA,SAAS,CAAC,OACR,IAAI,CAAC;gBACH,MAAM,UAAgB;oBACpB,GAAG,IAAI;oBACP,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;oBACzC,WAAW,IAAI;oBACf,UAAU;oBACV,QAAQ;oBACR,YAAY,KAAK,UAAU,IAAI,EAAE;gBACnC;gBACA,OAAO;oBACL,OAAO;2BAAI,MAAM,KAAK;wBAAE;qBAAQ;gBAClC;YACF;QAEF,YAAY,CAAC,KACX,IAAI,CAAC,QAAU,CAAC;oBACd,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBAC5C,CAAC;QAEH,YAAY,CAAC,IAAI,UACf,IAAI,CAAC;gBACH,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBAC9C,IAAI,CAAC,MAAM,OAAO;gBAElB,MAAM,cAAc;oBAAE,GAAG,IAAI;oBAAE,GAAG,OAAO;gBAAC;gBAE1C,6CAA6C;gBAC7C,IAAI,QAAQ,UAAU,KAAK,WAAW;oBACpC,MAAM,sBAAsB,YAAY,UAAU,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM;oBACpF,YAAY,QAAQ,GAClB,YAAY,UAAU,CAAC,MAAM,GAAG,IAC5B,KAAK,KAAK,CAAC,AAAC,sBAAsB,YAAY,UAAU,CAAC,MAAM,GAAI,OACnE;oBAEN,iDAAiD;oBACjD,IAAI,YAAY,QAAQ,KAAK,OAAO,YAAY,MAAM,KAAK,UAAU;wBACnE,YAAY,MAAM,GAAG;oBACvB;gBACF;gBAEA,OAAO;oBACL,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK,cAAc;gBAC7D;YACF;QAEF,cAAc,CAAC,QAAQ,YACrB,IAAI,CAAC;gBACH,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBAC9C,IAAI,CAAC,MAAM,OAAO;gBAElB,MAAM,WAAW,KAAK,UAAU,CAAC,MAAM,GAAG,IAAI,KAAK,GAAG,IAAI,KAAK,UAAU,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,KAAK,KAAK,CAAC;gBAClG,MAAM,eAA0B;oBAC9B,GAAG,SAAS;oBACZ,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;oBACzC,OAAO,WAAW;gBACpB;gBAEA,MAAM,oBAAoB;uBAAI,KAAK,UAAU;oBAAE;iBAAa,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,KAAK,GAAG,EAAE,KAAK;gBAC7F,MAAM,sBAAsB,kBAAkB,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM;gBAC/E,MAAM,WAAW,kBAAkB,MAAM,GAAG,IAAI,KAAK,KAAK,CAAC,AAAC,sBAAsB,kBAAkB,MAAM,GAAI,OAAO;gBAErH,OAAO;oBACL,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,IACtB,EAAE,EAAE,KAAK,SACL;4BACE,GAAG,CAAC;4BACJ,YAAY;4BACZ;4BACA,QAAQ,aAAa,OAAO,EAAE,MAAM,KAAK,WAAW,cAAc,EAAE,MAAM;wBAC5E,IACA;gBAER;YACF;QAEF,iBAAiB,CAAC,QAAQ,aAAa,UACrC,IAAI,CAAC;gBACH,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBAC9C,IAAI,CAAC,MAAM,OAAO;gBAElB,MAAM,oBAAoB,KAAK,UAAU,CAAC,GAAG,CAAC,CAAC,IAC7C,EAAE,EAAE,KAAK,cAAc;wBAAE,GAAG,CAAC;wBAAE,GAAG,OAAO;oBAAC,IAAI;gBAEhD,MAAM,sBAAsB,kBAAkB,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM;gBAC/E,MAAM,WAAW,kBAAkB,MAAM,GAAG,IAAI,KAAK,KAAK,CAAC,AAAC,sBAAsB,kBAAkB,MAAM,GAAI,OAAO;gBAErH,OAAO;oBACL,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,IACtB,EAAE,EAAE,KAAK,SACL;4BACE,GAAG,CAAC;4BACJ,YAAY;4BACZ;4BACA,QAAQ,aAAa,OAAO,EAAE,MAAM,KAAK,WAAW,cAAc,EAAE,MAAM;wBAC5E,IACA;gBAER;YACF;QAEF,iBAAiB,CAAC,QAAQ,cACxB,IAAI,CAAC;gBACH,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBAC9C,IAAI,CAAC,MAAM,OAAO;gBAElB,MAAM,oBAAoB,KAAK,UAAU,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBACjE,MAAM,sBAAsB,kBAAkB,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM;gBAC/E,MAAM,WAAW,kBAAkB,MAAM,GAAG,IAAI,KAAK,KAAK,CAAC,AAAC,sBAAsB,kBAAkB,MAAM,GAAI,OAAO;gBAErH,OAAO;oBACL,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,IACtB,EAAE,EAAE,KAAK,SACL;4BACE,GAAG,CAAC;4BACJ,YAAY;4BACZ;wBACF,IACA;gBAER;YACF;QAEF,iBAAiB,CAAC,QAAQ,cACxB,IAAI,CAAC;gBACH,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBAC9C,IAAI,CAAC,MAAM,OAAO;gBAElB,MAAM,oBAAoB,KAAK,UAAU,CAAC,GAAG,CAAC,CAAC;oBAC7C,IAAI,EAAE,EAAE,KAAK,aAAa;wBACxB,MAAM,QAAQ,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;wBACpD,OAAO;4BACL,GAAG,CAAC;4BACJ,WAAW,CAAC,EAAE,SAAS;4BACvB,eAAe,CAAC,EAAE,SAAS,GAAG,QAAQ;wBACxC;oBACF;oBACA,OAAO;gBACT;gBAEA,MAAM,sBAAsB,kBAAkB,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM;gBAC/E,MAAM,WAAW,kBAAkB,MAAM,GAAG,IAAI,KAAK,KAAK,CAAC,AAAC,sBAAsB,kBAAkB,MAAM,GAAI,OAAO;gBAErH,OAAO;oBACL,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,IACtB,EAAE,EAAE,KAAK,SACL;4BACE,GAAG,CAAC;4BACJ,YAAY;4BACZ;4BACA,QAAQ,aAAa,OAAO,EAAE,MAAM,KAAK,WAAW,cAAc,EAAE,MAAM;wBAC5E,IACA;gBAER;YACF;QAEF,iBAAiB,CAAC;YAChB,MAAM,QAAQ;YACd,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;YAC9C,OAAO,MAAM,YAAY;QAC3B;QAEA,kBAAkB,CAAC;YACjB,MAAM,QAAQ;YACd,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;YAC9C,IAAI,CAAC,MAAM,OAAO,EAAE;YAEpB,MAAM,cAAwB,EAAE;YAChC,MAAM,sBAAsB,KAAK,UAAU,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM;YAC7E,MAAM,kBAAkB,KAAK,UAAU,CAAC,MAAM;YAC9C,MAAM,WAAW,KAAK,QAAQ;YAE9B,6BAA6B;YAC7B,IAAI,aAAa,GAAG;gBAClB,YAAY,IAAI,CAAC;gBACjB,YAAY,IAAI,CAAC;YACnB,OAAO,IAAI,WAAW,IAAI;gBACxB,YAAY,IAAI,CAAC;gBACjB,YAAY,IAAI,CAAC;YACnB,OAAO,IAAI,WAAW,IAAI;gBACxB,YAAY,IAAI,CAAC;gBACjB,YAAY,IAAI,CAAC;YACnB,OAAO,IAAI,WAAW,IAAI;gBACxB,YAAY,IAAI,CAAC;gBACjB,YAAY,IAAI,CAAC;YACnB,OAAO,IAAI,WAAW,KAAK;gBACzB,YAAY,IAAI,CAAC;gBACjB,YAAY,IAAI,CAAC;YACnB;YAEA,+BAA+B;YAC/B,MAAM,eAAe,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IACvC,EAAE,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,KAAK,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,WAAW,OACjF,KAAK,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,EAAE,KAAK,CAAC,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,WAAW;YAEnF,IAAI,aAAa,MAAM,KAAK,GAAG;gBAC7B,YAAY,IAAI,CAAC;YACnB,OAAO;gBACL,MAAM,kBAAkB,aAAa,MAAM,CAAC,CAAC,IAAM,CAAC,EAAE,SAAS;gBAC/D,IAAI,gBAAgB,MAAM,GAAG,GAAG;oBAC9B,YAAY,IAAI,CAAC,CAAC,SAAS,EAAE,gBAAgB,MAAM,CAAC,mDAAmD,CAAC;gBAC1G;YACF;YAEA,yBAAyB;YACzB,IAAI,KAAK,UAAU,EAAE;gBACnB,MAAM,aAAa,IAAI,KAAK,KAAK,UAAU;gBAC3C,MAAM,QAAQ,IAAI;gBAClB,MAAM,gBAAgB,KAAK,IAAI,CAAC,CAAC,WAAW,OAAO,KAAK,MAAM,OAAO,EAAE,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;gBAC/F,MAAM,sBAAsB,kBAAkB;gBAE9C,IAAI,gBAAgB,KAAK,sBAAsB,GAAG;oBAChD,MAAM,qBAAqB,sBAAsB;oBACjD,IAAI,qBAAqB,KAAK;wBAC5B,YAAY,IAAI,CAAC,CAAC,SAAS,EAAE,cAAc,qBAAqB,EAAE,KAAK,IAAI,CAAC,oBAAoB,uCAAuC,CAAC;oBAC1I;gBACF;YACF;YAEA,OAAO,YAAY,KAAK,CAAC,GAAG,GAAG,2BAA2B;;QAC5D;QAEA,gBAAgB,CAAC,cACf,IAAI,CAAC;gBACH,MAAM,iBAA8B;oBAClC,GAAG,WAAW;oBACd,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;oBACzC,MAAM,IAAI;gBACZ;gBACA,OAAO;oBACL,cAAc;2BAAI,MAAM,YAAY;wBAAE;qBAAe;gBACvD;YACF;QAEF,mBAAmB,CAAC,KAClB,IAAI,CAAC,QAAU,CAAC;oBACd,cAAc,MAAM,YAAY,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBAC1D,CAAC;QAEH,wBAAwB;YACtB,MAAM,QAAQ;YACd,MAAM,eAAe,MAAM,YAAY;YAEvC,kBAAkB;YAClB,MAAM,eAAuC,CAAC;YAC9C,aAAa,OAAO,CAAC,CAAC;gBACpB,YAAY,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI;YAC3D;YAEA,MAAM,aAAa,OAAO,OAAO,CAAC,cAC/B,GAAG,CAAC,CAAC,CAAC,QAAQ,MAAM,GAAK,CAAC;oBAAE;oBAAQ;gBAAM,CAAC,GAC3C,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,KAAK,GAAG,EAAE,KAAK,EAChC,KAAK,CAAC,GAAG;YAEZ,4BAA4B;YAC5B,MAAM,YAAY,aAAa,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,QAAQ,EAAE;YAEpE,6BAA6B;YAC7B,MAAM,WAAqB,EAAE;YAC7B,MAAM,aAAqC,CAAC;YAC5C,aAAa,OAAO,CAAC,CAAC;gBACpB,UAAU,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI;YACnD;YAEA,MAAM,iBAAiB,OAAO,OAAO,CAAC,YAAY,IAAI,CAAC,CAAC,GAAG,IAAM,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;YAChF,IAAI,gBAAgB;gBAClB,SAAS,IAAI,CAAC,CAAC,8BAA8B,EAAE,cAAc,CAAC,EAAE,CAAC,EAAE,EAAE,cAAc,CAAC,EAAE,CAAC,OAAO,CAAC;YACjG;YAEA,MAAM,cAAc,aAAa,MAAM,GAAG,IAAI,YAAY,aAAa,MAAM,GAAG;YAChF,IAAI,cAAc,IAAI;gBACpB,SAAS,IAAI,CAAC,CAAC,gCAAgC,EAAE,KAAK,KAAK,CAAC,aAAa,kCAAkC,CAAC;YAC9G;YAEA,IAAI,WAAW,MAAM,GAAG,GAAG;gBACzB,SAAS,IAAI,CAAC,CAAC,wBAAwB,EAAE,UAAU,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,EAAE,UAAU,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC;YAChG;YAEA,MAAM,QAAQ,IAAI;YAClB,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;YACxB,MAAM,oBAAoB,aAAa,MAAM,CAAC,CAAC;gBAC7C,MAAM,QAAQ,IAAI,KAAK,EAAE,IAAI;gBAC7B,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;gBACxB,OAAO,MAAM,OAAO,OAAO,MAAM,OAAO;YAC1C;YACA,IAAI,kBAAkB,MAAM,GAAG,GAAG;gBAChC,SAAS,IAAI,CAAC,CAAC,WAAW,EAAE,kBAAkB,MAAM,CAAC,kDAAkD,CAAC;YAC1G;YAEA,OAAO;gBAAE;gBAAY;gBAAW;YAAS;QAC3C;QAEA,cAAc,CAAC,YACb,IAAI,CAAC;gBACH,MAAM,eAA0B;oBAC9B,GAAG,SAAS;oBACZ,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;oBACzC,SAAS;oBACT,WAAW;gBACb;gBACA,OAAO;oBACL,YAAY;2BAAI,MAAM,UAAU;wBAAE;qBAAa;gBACjD;YACF;QAEF,yBAAyB,CAAC,cACxB,IAAI,CAAC;gBACH,MAAM,YAAY,MAAM,UAAU,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBACxD,IAAI,CAAC,WAAW,OAAO;gBAEvB,IAAI,UAAU;gBACd,MAAM,QAAQ,IAAI;gBAClB,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;gBAExB,OAAQ,UAAU,MAAM;oBACtB,KAAK;wBACH,MAAM,mBAAmB,MAAM,aAAa,CAAC,MAAM,CAAC,CAAC;4BACnD,MAAM,cAAc,IAAI,KAAK,EAAE,IAAI;4BACnC,YAAY,QAAQ,CAAC,GAAG,GAAG,GAAG;4BAC9B,OAAO,eAAe,UAAU,SAAS,IAAI,eAAe,UAAU,OAAO;wBAC/E;wBACA,UAAU,iBAAiB,MAAM;wBACjC;oBACF,KAAK;wBACH,MAAM,gBAAgB,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC;4BACxC,IAAI,CAAC,EAAE,SAAS,EAAE,OAAO;4BACzB,MAAM,WAAW,IAAI,KAAK,EAAE,SAAS;4BACrC,SAAS,QAAQ,CAAC,GAAG,GAAG,GAAG;4BAC3B,OAAO,YAAY,UAAU,SAAS,IAAI,YAAY,UAAU,OAAO;wBACzE;wBACA,UAAU,cAAc,MAAM;wBAC9B;oBACF,KAAK;wBACH,MAAM,YAAY,KAAK,GAAG,IAAI,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,aAAa,GAAG;wBACxE,UAAU;wBACV;oBACF,KAAK;wBACH,MAAM,gBAAgB,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,QAAQ,EAAE;wBACvE,UAAU,KAAK,KAAK,CAAC,gBAAgB,CAAC,MAAM,KAAK,CAAC,MAAM,IAAI,CAAC;wBAC7D;gBACJ;gBAEA,MAAM,YAAY,WAAW,UAAU,MAAM;gBAE7C,OAAO;oBACL,YAAY,MAAM,UAAU,CAAC,GAAG,CAAC,CAAC,IAChC,EAAE,EAAE,KAAK,cACL;4BACE,GAAG,CAAC;4BACJ;4BACA;wBACF,IACA;gBAER;YACF;QAEF,mBAAmB,IACjB,IAAI,CAAC;gBACH,MAAM,WAA0B,EAAE;gBAElC,2BAA2B;gBAC3B,IAAI,MAAM,aAAa,CAAC,MAAM,IAAI,GAAG;oBACnC,MAAM,cAAc,MAAM,YAAY,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,iBAAiB,CAAC,EAAE,UAAU;oBAC1F,IAAI,aAAa;wBACf,SAAS,IAAI,CAAC;4BAAE,GAAG,WAAW;4BAAE,YAAY,IAAI;wBAAO;oBACzD;gBACF;gBACA,IAAI,MAAM,aAAa,CAAC,MAAM,IAAI,IAAI;oBACpC,MAAM,cAAc,MAAM,YAAY,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,kBAAkB,CAAC,EAAE,UAAU;oBAC3F,IAAI,aAAa;wBACf,SAAS,IAAI,CAAC;4BAAE,GAAG,WAAW;4BAAE,YAAY,IAAI;wBAAO;oBACzD;gBACF;gBAEA,0BAA0B;gBAC1B,MAAM,iBAAiB,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM;gBACpE,IAAI,kBAAkB,IAAI;oBACxB,MAAM,cAAc,MAAM,YAAY,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,kBAAkB,CAAC,EAAE,UAAU;oBAC3F,IAAI,aAAa;wBACf,SAAS,IAAI,CAAC;4BAAE,GAAG,WAAW;4BAAE,YAAY,IAAI;wBAAO;oBACzD;gBACF;gBAEA,2BAA2B;gBAC3B,MAAM,YAAY,KAAK,GAAG,IAAI,MAAM,MAAM,CAAC,GAAG,CAAC,CAAC,IAAM,EAAE,aAAa,GAAG;gBACxE,IAAI,aAAa,GAAG;oBAClB,MAAM,cAAc,MAAM,YAAY,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,gBAAgB,CAAC,EAAE,UAAU;oBACzF,IAAI,aAAa;wBACf,SAAS,IAAI,CAAC;4BAAE,GAAG,WAAW;4BAAE,YAAY,IAAI;wBAAO;oBACzD;gBACF;gBAEA,0BAA0B;gBAC1B,MAAM,iBAAiB,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,aAAa,MAAM;gBACjF,IAAI,kBAAkB,GAAG;oBACvB,MAAM,cAAc,MAAM,YAAY,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,iBAAiB,CAAC,EAAE,UAAU;oBAC1F,IAAI,aAAa;wBACf,SAAS,IAAI,CAAC;4BAAE,GAAG,WAAW;4BAAE,YAAY,IAAI;wBAAO;oBACzD;gBACF;gBAEA,4BAA4B;gBAC5B,IAAI,MAAM,SAAS,CAAC,UAAU,IAAI,IAAI;oBACpC,MAAM,cAAc,MAAM,YAAY,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,iBAAiB,CAAC,EAAE,UAAU;oBAC1F,IAAI,aAAa;wBACf,SAAS,IAAI,CAAC;4BAAE,GAAG,WAAW;4BAAE,YAAY,IAAI;wBAAO;oBACzD;gBACF;gBAEA,+BAA+B;gBAC/B,MAAM,kBAAkB,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,KAAK;oBAC/C,OAAO,MAAM,EAAE,UAAU,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM;gBAC7D,GAAG;gBACH,IAAI,mBAAmB,IAAI;oBACzB,MAAM,cAAc,MAAM,YAAY,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,sBAAsB,CAAC,EAAE,UAAU;oBAC/F,IAAI,aAAa;wBACf,SAAS,IAAI,CAAC;4BAAE,GAAG,WAAW;4BAAE,YAAY,IAAI;wBAAO;oBACzD;gBACF;gBAEA,IAAI,SAAS,MAAM,GAAG,GAAG;oBACvB,OAAO;wBACL,cAAc,MAAM,YAAY,CAAC,GAAG,CAAC,CAAC;4BACpC,MAAM,sBAAsB,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,EAAE,EAAE;4BAC9D,OAAO,uBAAuB;wBAChC;oBACF;gBACF;gBAEA,OAAO;YACT;QAEF,yBAAyB;YACvB,MAAM,QAAQ;YACd,OAAO,MAAM,YAAY,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,UAAU,KAAK;QAC3D;QAEA,gBAAgB;YACd,MAAM,QAAQ;YACd,oEAAoE;YACpE,MAAM,QACJ,MAAM,aAAa,CAAC,MAAM,GAAG,KAC7B,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM,GAAG,IAChD,MAAM,MAAM,CAAC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,aAAa,EAAE,KAAK,IAC5D,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,aAAa,MAAM,GAAG;YAE/D,OAAO;gBACL;oBAAE,QAAQ;oBAAO;oBAAO,MAAM;gBAAE;gBAChC;oBAAE,QAAQ;oBAAS,OAAO,QAAQ;oBAAI,MAAM;gBAAE;gBAC9C;oBAAE,QAAQ;oBAAS,OAAO,QAAQ;oBAAK,MAAM;gBAAE;aAChD;QACH;QAEA,oBAAoB,CAAC,WACnB,IAAI;gBACF,iBAAiB;YACnB;QAEF,gBAAgB,IACd,IAAI,CAAC,QAAU,CAAC;oBACd,mBAAmB;2BAAI,MAAM,iBAAiB;wBAAE,MAAM,eAAe;qBAAC;gBACxE,CAAC;QAEH,sBAAsB;YACpB,MAAM,QAAQ;YACd,OAAO,MAAM,iBAAiB;QAChC;QAEA,cAAc,CAAC,QACb,IAAI,CAAC;gBACH,MAAM,WAAsB;oBAC1B,GAAG,KAAK;oBACR,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;gBAC3C;gBACA,OAAO;oBACL,YAAY;2BAAI,MAAM,UAAU;wBAAE;qBAAS;gBAC7C;YACF;QAEF,iBAAiB,CAAC,IAAI,UACpB,IAAI,CAAC,QAAU,CAAC;oBACd,YAAY,MAAM,UAAU,CAAC,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK;4BAAE,GAAG,CAAC;4BAAE,GAAG,OAAO;wBAAC,IAAI;gBAChF,CAAC;QAEH,iBAAiB,CAAC,KAChB,IAAI,CAAC,QAAU,CAAC;oBACd,YAAY,MAAM,UAAU,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBACtD,CAAC;QAEH,sBAAsB,CAAC;YACrB,MAAM,QAAQ;YACd,OAAO,MAAM,UAAU,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK,MAAM,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,SAAS,CAAC,aAAa,CAAC,EAAE,SAAS;QAC7G;QAEA,eAAe,CAAC,IAAI,SAAS,eAC3B,IAAI,CAAC;gBACH,MAAM,QAAQ,MAAM,UAAU,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;gBACpD,IAAI,CAAC,OAAO,OAAO;gBAEnB,MAAM,eAAe,SAAS,aAAa,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI,KAAK,SAAS,aAAa,KAAK,CAAC,IAAI,CAAC,EAAE;gBACpG,MAAM,aAAa,SAAS,MAAM,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI,KAAK,SAAS,MAAM,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;gBACpG,MAAM,WAAW,aAAa,CAAC,SAAS,MAAM,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,IAAI,KAAK,SAAS,MAAM,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC;gBACrH,MAAM,gBAAgB,eAAe;gBACrC,MAAM,aAAa,GAAG,KAAK,KAAK,CAAC,gBAAgB,IAAI,QAAQ,GAAG,QAAQ,CAAC,GAAG,KAAK,CAAC,EAAE,CAAC,gBAAgB,EAAE,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG,MAAM;gBAEtI,OAAO;oBACL,YAAY,MAAM,UAAU,CAAC,GAAG,CAAC,CAAC,IAChC,EAAE,EAAE,KAAK,KACL;4BACE,GAAG,CAAC;4BACJ,MAAM;4BACN,WAAW;4BACX,SAAS;wBACX,IACA;gBAER;YACF;QAEF,gBAAgB,CAAC,SACf,IAAI,CAAC;gBACH,MAAM,YAAyB;oBAC7B,GAAG,MAAM;oBACT,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;gBAC3C;gBACA,OAAO;oBACL,cAAc;2BAAI,MAAM,YAAY;wBAAE;qBAAU;gBAClD;YACF;QAEF,aAAa,CAAC,WACZ,IAAI,CAAC;gBACH,MAAM,cAAwB;oBAC5B,GAAG,QAAQ;oBACX,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;oBACzC,WAAW,IAAI;gBACjB;gBACA,OAAO;oBACL,WAAW;2BAAI,MAAM,SAAS;wBAAE;qBAAY;gBAC9C;YACF;QAEF,gBAAgB,CAAC,KACf,IAAI,CAAC,QAAU,CAAC;oBACd,WAAW,MAAM,SAAS,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK;oBAClD,iBAAiB,MAAM,eAAe,KAAK,KAAK,YAAY,MAAM,eAAe;gBACnF,CAAC;QAEH,oBAAoB,CAAC,KACnB,IAAI;gBACF,iBAAiB;YACnB;QAEF,sBAAsB;YACpB,MAAM,QAAQ;YACd,MAAM,QAAQ,IAAI;YAClB,MAAM,YAAY,IAAI,KAAK;YAC3B,UAAU,OAAO,CAAC,MAAM,OAAO,KAAK,MAAM,MAAM;YAEhD,MAAM,YAAY,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC;gBACpC,MAAM,WAAW,IAAI,KAAK,EAAE,SAAS;gBACrC,OAAO,YAAY,aAAa,YAAY;YAC9C;YAEA,MAAM,eAAe,MAAM,aAAa,CAAC,MAAM,CAAC,CAAC;gBAC/C,MAAM,cAAc,IAAI,KAAK,EAAE,IAAI;gBACnC,OAAO,eAAe,aAAa,eAAe;YACpD;YAEA,MAAM,UAAU,CAAC,eAAe,EAAE,UAAU,kBAAkB,GAAG,GAAG,EAAE,MAAM,kBAAkB,GAAG;;gBAErF,EAAE,aAAa,MAAM,CAAC;kBACpB,EAAE,aAAa,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,QAAQ,EAAE,GAAG;iBACxD,EAAE,UAAU,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM,CAAC,GAAG,EAAE,UAAU,MAAM,CAAC;mBAClE,EAAE,MAAM,MAAM,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,aAAa,GAAG,GAAG,MAAM,CAAC;gBAC5D,EAAE,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,UAAU,MAAM,CAAC;cAC5D,EAAE,MAAM,YAAY,CAAC,MAAM,CAAC,CAAC;gBACrC,MAAM,QAAQ,IAAI,KAAK,EAAE,IAAI;gBAC7B,OAAO,SAAS,aAAa,SAAS;YACxC,GAAG,MAAM,EAAE;YAEX,OAAO;gBACL;gBACA,MAAM;oBACJ,eAAe,aAAa,MAAM;oBAClC,WAAW,aAAa,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,QAAQ,EAAE;oBAC7D,gBAAgB,UAAU,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM;oBAC3D,YAAY,UAAU,MAAM;oBAC5B,cAAc,MAAM,MAAM,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,aAAa,GAAG,GAAG,MAAM;oBACpE,aAAa,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,UAAU,MAAM;oBACpE,cAAc,MAAM,YAAY,CAAC,MAAM,CAAC,CAAC;wBACvC,MAAM,QAAQ,IAAI,KAAK,EAAE,IAAI;wBAC7B,OAAO,SAAS,aAAa,SAAS;oBACxC,GAAG,MAAM;gBACX;YACF;QACF;QAEA,uBAAuB;YACrB,MAAM,QAAQ;YACd,MAAM,QAAQ,IAAI;YAClB,MAAM,aAAa,IAAI,KAAK,MAAM,WAAW,IAAI,MAAM,QAAQ,IAAI;YAEnE,MAAM,aAAa,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC;gBACrC,MAAM,WAAW,IAAI,KAAK,EAAE,SAAS;gBACrC,OAAO,YAAY,cAAc,YAAY;YAC/C;YAEA,MAAM,gBAAgB,MAAM,aAAa,CAAC,MAAM,CAAC,CAAC;gBAChD,MAAM,cAAc,IAAI,KAAK,EAAE,IAAI;gBACnC,OAAO,eAAe,cAAc,eAAe;YACrD;YAEA,MAAM,UAAU,CAAC,gBAAgB,EAAE,WAAW,kBAAkB,GAAG,GAAG,EAAE,MAAM,kBAAkB,GAAG;;gBAEvF,EAAE,cAAc,MAAM,CAAC;kBACrB,EAAE,KAAK,KAAK,CAAC,cAAc,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,QAAQ,EAAE,KAAK,IAAI;iBAC1E,EAAE,WAAW,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM,CAAC,GAAG,EAAE,WAAW,MAAM,CAAC;mBACpE,EAAE,MAAM,MAAM,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,aAAa,GAAG,GAAG,MAAM,CAAC;iBAC3D,EAAE,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,aAAa,MAAM,CAAC;uBACvD,EAAE,MAAM,YAAY,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,UAAU,EAAE,MAAM,CAAC;sBACzD,EAAE,MAAM,UAAU,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM,EAAE;YAExE,OAAO;gBACL;gBACA,MAAM;oBACJ,eAAe,cAAc,MAAM;oBACnC,WAAW,KAAK,KAAK,CAAC,cAAc,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,QAAQ,EAAE,KAAK;oBAC9E,gBAAgB,WAAW,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM;oBAC5D,YAAY,WAAW,MAAM;oBAC7B,cAAc,MAAM,MAAM,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,aAAa,GAAG,GAAG,MAAM;oBACpE,gBAAgB,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,aAAa,MAAM;oBAC1E,cAAc,MAAM,YAAY,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,UAAU,EAAE,MAAM;oBACnE,qBAAqB,MAAM,UAAU,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,MAAM;gBACzE;YACF;QACF;QAEA,aAAa;YACX,MAAM,QAAQ;YACd,MAAM,UAAU;gBAAC;gBAAQ;gBAAkB;gBAAmB;gBAAiB;aAAiB;YAChG,MAAM,OAAiB,EAAE;YAEzB,gBAAgB;YAChB,MAAM,UAA+B,CAAC;YACtC,MAAM,aAAa,CAAC,OAAO,CAAC,CAAC;gBAC3B,MAAM,OAAO,IAAI,KAAK,EAAE,IAAI,EAAE,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;gBACzD,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,GAAG;oBAAE;oBAAM,eAAe;oBAAG,OAAO;oBAAG,QAAQ;oBAAG,OAAO;gBAAE;gBAC5F,OAAO,CAAC,KAAK,CAAC,aAAa;YAC7B;YAEA,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,EAAE,OAAO,CAAC,CAAC;gBAC9C,MAAM,OAAO,IAAI,KAAK,EAAE,SAAS,EAAE,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;gBAC9D,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,GAAG;oBAAE;oBAAM,eAAe;oBAAG,OAAO;oBAAG,QAAQ;oBAAG,OAAO;gBAAE;gBAC5F,OAAO,CAAC,KAAK,CAAC,KAAK;YACrB;YAEA,OAAO,MAAM,CAAC,SAAS,OAAO,CAAC,CAAC;gBAC9B,KAAK,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,EAAE,IAAI,aAAa,CAAC,CAAC,EAAE,IAAI,KAAK,CAAC,CAAC,EAAE,IAAI,MAAM,CAAC,CAAC,EAAE,IAAI,KAAK,EAAE;YACtF;YAEA,OAAO;gBAAC,QAAQ,IAAI,CAAC;mBAAS;aAAK,CAAC,IAAI,CAAC;QAC3C;QAEA,aAAa;YACX,yDAAyD;YACzD,iDAAiD;YACjD,MAAM,QAAQ;YACd,MAAM,eAAe,MAAM,oBAAoB;YAC/C,MAAM,gBAAgB,MAAM,qBAAqB;YAEjD,MAAM,UAAU,CAAC;WACV,EAAE,IAAI,OAAO,kBAAkB,GAAG;;AAE7C,EAAE,aAAa,OAAO,CAAC;;AAEvB,EAAE,cAAc,OAAO,CAAC;;;;AAIxB,CAAC;YAEG,MAAM,OAAO,IAAI,KAAK;gBAAC;aAAQ,EAAE;gBAAE,MAAM;YAAa;YACtD,MAAM,MAAM,IAAI,eAAe,CAAC;YAChC,MAAM,IAAI,SAAS,aAAa,CAAC;YACjC,EAAE,IAAI,GAAG;YACT,EAAE,QAAQ,GAAG,CAAC,aAAa,EAAE,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC;YACzE,SAAS,IAAI,CAAC,WAAW,CAAC;YAC1B,EAAE,KAAK;YACP,SAAS,IAAI,CAAC,WAAW,CAAC;YAC1B,IAAI,eAAe,CAAC;QACtB;QAEA,eAAe,CAAC,SACd,IAAI,CAAC;gBACH,MAAM,YAAwB;oBAC5B,GAAG,MAAM;oBACT,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;oBACzC,UAAU,IAAI;gBAChB;gBACA,OAAO;oBACL,aAAa;2BAAI,MAAM,WAAW;wBAAE;qBAAU;gBAChD;YACF;QAEF,WAAW,CAAC,QAAQ,YAClB,IAAI,CAAC;gBACH,MAAM,gBAAgB,MAAM,WAAW,CAAC,IAAI,CAAC,CAAC,KAAO,GAAG,MAAM,KAAK;gBACnE,IAAI,eAAe;oBACjB,OAAO;wBACL,aAAa,MAAM,WAAW,CAAC,GAAG,CAAC,CAAC,KAClC,GAAG,MAAM,KAAK,SACV;gCACE,GAAG,EAAE;gCACL,YAAY;uCAAI,IAAI,IAAI;2CAAI,GAAG,UAAU;2CAAK;qCAAU;iCAAE;4BAC5D,IACA;oBAER;gBACF;gBACA,MAAM,WAAuB;oBAC3B,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;oBACzC;oBACA,YAAY;oBACZ,UAAU,IAAI;gBAChB;gBACA,OAAO;oBACL,aAAa;2BAAI,MAAM,WAAW;wBAAE;qBAAS;gBAC/C;YACF;QAEF,sBAAsB,CAAC,YACrB,IAAI,CAAC;gBACH,MAAM,eAA+B;oBACnC,GAAG,SAAS;oBACZ,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;oBACzC,aAAa,UAAU,YAAY,CAAC,GAAG,CAAC,CAAC,SAAW,CAAC;4BAAE;4BAAQ,OAAO;wBAAE,CAAC;gBAC3E;gBACA,OAAO;oBACL,iBAAiB;2BAAI,MAAM,eAAe;wBAAE;qBAAa;gBAC3D;YACF;QAEF,6BAA6B;YAC3B,MAAM,QAAQ;YACd,gFAAgF;YAChF,MAAM,iBAAiB,MAAM,aAAa,CAAC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,QAAQ,EAAE;YAChF,MAAM,aAAa,MAAM,KAAK,CAAC,MAAM;YACrC,MAAM,kBAAkB,MAAM,KAAK,CAAC,MAAM,GAAG,IAAI,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,QAAQ,EAAE,KAAK,MAAM,KAAK,CAAC,MAAM,GAAG;YAE5H,OAAO;gBACL;gBACA;gBACA,iBAAiB,KAAK,KAAK,CAAC;YAC9B;QACF;QAEA,iBAAiB,CAAC,eAChB,IAAI,CAAC;gBACH,MAAM,kBAAgC;oBACpC,GAAG,YAAY;oBACf,IAAI,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC;oBACzC,WAAW,IAAI;oBACf,MAAM;gBACR;gBACA,OAAO;oBACL,eAAe;wBAAC;2BAAoB,MAAM,aAAa;qBAAC;gBAC1D;YACF;QAEF,sBAAsB,CAAC,KACrB,IAAI,CAAC,QAAU,CAAC;oBACd,eAAe,MAAM,aAAa,CAAC,GAAG,CAAC,CAAC,IAAO,EAAE,EAAE,KAAK,KAAK;4BAAE,GAAG,CAAC;4BAAE,MAAM;wBAAK,IAAI;gBACtF,CAAC;QAEH,oBAAoB,IAClB,IAAI;gBACF,eAAe,EAAE;YACnB;QAEF,wBAAwB;YACtB,MAAM,QAAQ;YACd,OAAO,MAAM,aAAa,CAAC,MAAM,CAAC,CAAC,IAAM,CAAC,EAAE,IAAI;QAClD;QAEA,yBAAyB;YACvB,MAAM,QAAQ;YACd,MAAM,MAAM,IAAI;YAChB,MAAM,cAAc,MAAM,aAAa,CAAC,MAAM,aAAa,CAAC,MAAM,GAAG,EAAE;YAEvE,qFAAqF;YACrF,IAAI,aAAa;gBACf,MAAM,cAAc,IAAI,KAAK,YAAY,IAAI,EAAE,OAAO;gBACtD,MAAM,mBAAmB,CAAC,IAAI,OAAO,KAAK,WAAW,IAAI,CAAC,OAAO,EAAE,EAAE,UAAU;;gBAC/E,IAAI,oBAAoB,MAAM,mBAAmB,IAAI;oBACnD,MAAM,iBAAiB,MAAM,YAAY,CAAC,IAAI,CAAC,CAAC;wBAC9C,MAAM,WAAW,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO;wBACzC,OAAO,WAAW,eAAe,EAAE,IAAI,KAAK,WAAW,EAAE,MAAM,CAAC,WAAW,GAAG,QAAQ,CAAC;oBACzF;oBACA,IAAI,CAAC,gBAAgB;wBACnB,MAAM,eAAe,CAAC;4BACpB,MAAM;4BACN,OAAO;4BACP,SAAS;4BACT,WAAW;wBACb;oBACF;gBACF;YACF;YAEA,6BAA6B;YAC7B,MAAM,KAAK,CAAC,OAAO,CAAC,CAAC;gBACnB,MAAM,mBAAmB,KAAK,UAAU,CAAC,MAAM,CAAC,CAAC;oBAC/C,IAAI,CAAC,EAAE,aAAa,EAAE,OAAO;oBAC7B,MAAM,gBAAgB,IAAI,KAAK,EAAE,aAAa,EAAE,OAAO;oBACvD,OAAO,IAAI,OAAO,KAAK,gBAAgB,MAAM,qBAAqB;;gBACpE;gBACA,IAAI,iBAAiB,MAAM,GAAG,GAAG;oBAC/B,MAAM,eAAe,CAAC;wBACpB,MAAM;wBACN,OAAO;wBACP,SAAS,CAAC,eAAe,EAAE,gBAAgB,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,EAAE,KAAK,KAAK,CAAC,CAAC,CAAC;wBAC3E,WAAW;oBACb;gBACF;YACF;YAEA,0BAA0B;YAC1B,MAAM,aAAa,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC;gBACrC,IAAI,EAAE,SAAS,EAAE,OAAO;gBACxB,MAAM,WAAW,IAAI,KAAK,EAAE,SAAS;gBACrC,OAAO,SAAS,YAAY,OAAO,IAAI,YAAY;YACrD;YACA,IAAI,WAAW,MAAM,GAAG,KAAK,IAAI,QAAQ,OAAO,KAAK,IAAI,UAAU,KAAK,GAAG;gBACzE,MAAM,eAAe,CAAC;oBACpB,MAAM;oBACN,OAAO;oBACP,SAAS,CAAC,SAAS,EAAE,WAAW,MAAM,CAAC,KAAK,EAAE,WAAW,MAAM,GAAG,IAAI,MAAM,GAAG,mBAAmB,CAAC;oBACnG,WAAW;gBACb;YACF;QACF;QAEA,gBAAgB,CAAC,SACf,IAAI;gBACF,eAAe;YACjB;QAEF,qBAAqB,CAAC;YACpB,MAAM,QAAQ;YACd,MAAM,eAAe,QAAQ,WAAW,GAAG,IAAI;YAE/C,eAAe;YACf,IAAI,aAAa,QAAQ,CAAC,eAAe,aAAa,QAAQ,CAAC,kBAAkB,aAAa,QAAQ,CAAC,aAAa;gBAClH,MAAM,WAAW,QAAQ,OAAO,CAAC,mCAAmC,IAAI,IAAI;gBAC5E,IAAI,UAAU;oBACZ,MAAM,OAAO,CAAC;wBACZ,OAAO;wBACP,UAAU;wBACV,cAAc;oBAChB;oBACA,MAAM,eAAe,CAAC;wBACpB,MAAM;wBACN,OAAO;wBACP,SAAS,CAAC,CAAC,EAAE,SAAS,+BAA+B,CAAC;oBACxD;gBACF;YACF;YAEA,sBAAsB;YACtB,IAAI,aAAa,QAAQ,CAAC,kBAAkB,aAAa,QAAQ,CAAC,kBAAkB,aAAa,QAAQ,CAAC,kBAAkB;gBAC1H,MAAM,WAAW,GAAG,UAAU;;gBAC9B,MAAM,eAAe,CAAC;gBACtB,MAAM,eAAe,CAAC;oBACpB,MAAM;oBACN,OAAO;oBACP,SAAS,CAAC,UAAU,EAAE,SAAS,sBAAsB,CAAC;gBACxD;YACF;YAEA,WAAW;YACX,IAAI,aAAa,QAAQ,CAAC,WAAW,aAAa,QAAQ,CAAC,YAAY;gBACrE,IAAI,OAA8D;gBAClE,IAAI,aAAa,QAAQ,CAAC,gBAAgB,aAAa,QAAQ,CAAC,YAAY,aAAa,QAAQ,CAAC,YAAY;oBAC5G,OAAO;gBACT,OAAO,IAAI,aAAa,QAAQ,CAAC,WAAW,aAAa,QAAQ,CAAC,WAAW,aAAa,QAAQ,CAAC,SAAS;oBAC1G,OAAO;gBACT,OAAO,IAAI,aAAa,QAAQ,CAAC,UAAU,aAAa,QAAQ,CAAC,UAAU,aAAa,QAAQ,CAAC,aAAa;oBAC5G,OAAO;gBACT,OAAO,IAAI,aAAa,QAAQ,CAAC,eAAe,aAAa,QAAQ,CAAC,UAAU;oBAC9E,OAAO;gBACT;gBACA,MAAM,QAAQ,QAAQ,OAAO,CAAC,kBAAkB,IAAI,IAAI;gBACxD,MAAM,YAAY,CAAC,MAAM,SAAS;gBAClC,MAAM,eAAe,CAAC;oBACpB,MAAM;oBACN,OAAO;oBACP,SAAS,CAAC,gCAAgC,EAAE,KAAK,EAAE,CAAC;gBACtD;YACF;QACF;QAEA,mBAAmB;QACnB,SAAS,CAAC,iBAAiB,YAAY,EAAE,GACvC,IAAI;gBACF,MAAM;oBACJ;oBACA;gBACF;YACF;QAEF,QAAQ;YACN,IAAI;gBACF,MAAM,MAAM;gBACZ,IAAI,OAAO,CAAC,MAAM;YACpB,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,wBAAwB;YACxC;YACA,IAAI;gBACF,MAAM;oBACJ,iBAAiB;oBACjB,WAAW;gBACb;gBACA,OAAO,EAAE;gBACT,QAAQ,EAAE;gBACV,OAAO,EAAE;gBACT,eAAe,EAAE;gBACjB,cAAc,EAAE;gBAChB,YAAY,EAAE;gBACd,YAAY,EAAE;gBACd,eAAe,EAAE;YACnB;QACF;IACF,CAAC"}},
    {"offset": {"line": 1353, "column": 0}, "map": {"version":3,"sources":["file:///D:/5th%20sem/PULSE-AI-PROJECT/lib/api.ts"],"sourcesContent":["// API configuration\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000\"\r\n\r\n// Helper function to get auth token\r\nfunction getAuthToken(): string | null {\r\n  if (typeof window === \"undefined\") return null\r\n  return localStorage.getItem(\"auth_token\")\r\n}\r\n\r\n// Helper function to make API requests\r\nasync function apiRequest<T>(\r\n  endpoint: string,\r\n  options: RequestInit = {}\r\n): Promise<T> {\r\n  const token = getAuthToken()\r\n  const headers: Record<string, string> = {\r\n    \"Content-Type\": \"application/json\",\r\n    ...(options.headers as Record<string, string>),\r\n  }\r\n\r\n  if (token) {\r\n    headers[\"Authorization\"] = `Bearer ${token}`\r\n  }\r\n\r\n  const response = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n    ...options,\r\n    headers,\r\n  })\r\n\r\n  if (!response.ok) {\r\n    const errorData = await response.json().catch(() => ({ message: \"Request failed\" }))\r\n    throw new Error(errorData.message || errorData.detail || `HTTP error! status: ${response.status}`)\r\n  }\r\n\r\n  return response.json()\r\n}\r\n\r\n// Auth API\r\nexport const authAPI = {\r\n  async login(email: string, password: string): Promise<void> {\r\n    const response = await apiRequest<{ access_token: string; token_type: string }>(\"/auth/login\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ email, password }),\r\n    })\r\n\r\n    if (typeof window !== \"undefined\" && response.access_token) {\r\n      localStorage.setItem(\"auth_token\", response.access_token)\r\n    }\r\n  },\r\n\r\n  async register(email: string, name: string, password: string): Promise<void> {\r\n    const response = await apiRequest<{ access_token: string; token_type: string }>(\"/auth/register\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ email, name, password }),\r\n    })\r\n\r\n    if (typeof window !== \"undefined\" && response.access_token) {\r\n      localStorage.setItem(\"auth_token\", response.access_token)\r\n    }\r\n  },\r\n\r\n  logout(): void {\r\n    if (typeof window !== \"undefined\") {\r\n      localStorage.removeItem(\"auth_token\")\r\n    }\r\n  },\r\n}\r\n\r\n// Users API\r\nexport const usersAPI = {\r\n  async getCurrentUser(): Promise<{ email: string; name: string; onboarding_completed: boolean }> {\r\n    return apiRequest<{ email: string; name: string; onboarding_completed: boolean }>(\"/users/me\")\r\n  },\r\n\r\n  async updateCurrentUser(data: { onboarding_completed?: boolean; name?: string }): Promise<void> {\r\n    await apiRequest(\"/users/me\", {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(data),\r\n    })\r\n  },\r\n}\r\n\r\n// Tasks API\r\nexport const tasksAPI = {\r\n  async getAll(): Promise<any[]> {\r\n    return apiRequest<any[]>(\"/tasks\")\r\n  },\r\n\r\n  async getById(id: string): Promise<any> {\r\n    return apiRequest<any>(`/tasks/${id}`)\r\n  },\r\n\r\n  async create(data: {\r\n    title: string\r\n    description?: string\r\n    priority: \"high\" | \"medium\" | \"low\"\r\n    time_estimate: number\r\n    category?: string\r\n    due_date?: string\r\n    focus_mode?: boolean\r\n  }): Promise<any> {\r\n    return apiRequest<any>(\"/tasks\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    })\r\n  },\r\n\r\n  async update(id: string, data: Partial<{\r\n    title: string\r\n    description: string\r\n    priority: \"high\" | \"medium\" | \"low\"\r\n    time_estimate: number\r\n    category: string\r\n    due_date: string\r\n    focus_mode: boolean\r\n    completed: boolean\r\n  }>): Promise<any> {\r\n    return apiRequest<any>(`/tasks/${id}`, {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(data),\r\n    })\r\n  },\r\n\r\n  async delete(id: string): Promise<void> {\r\n    await apiRequest(`/tasks/${id}`, {\r\n      method: \"DELETE\",\r\n    })\r\n  },\r\n}\r\n\r\n// Focus Sessions API\r\nexport const focusSessionsAPI = {\r\n  async getAll(): Promise<any[]> {\r\n    return apiRequest<any[]>(\"/focus-sessions\")\r\n  },\r\n\r\n  async create(data: { duration: number; completed: boolean }): Promise<any> {\r\n    return apiRequest<any>(\"/focus-sessions\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    })\r\n  },\r\n}\r\n\r\n"],"names":[],"mappings":"AAAA,oBAAoB;;;;;;;;;;;AACC;AAArB,MAAM,eAAe,iEAAmC;AAExD,oCAAoC;AACpC,SAAS;IACP;;IACA,OAAO,aAAa,OAAO,CAAC;AAC9B;AAEA,uCAAuC;AACvC,eAAe,WACb,QAAgB,EAChB,UAAuB,CAAC,CAAC;IAEzB,MAAM,QAAQ;IACd,MAAM,UAAkC;QACtC,gBAAgB;QAChB,GAAI,QAAQ,OAAO;IACrB;IAEA,IAAI,OAAO;QACT,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;IAC9C;IAEA,MAAM,WAAW,MAAM,MAAM,GAAG,eAAe,UAAU,EAAE;QACzD,GAAG,OAAO;QACV;IACF;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC;gBAAE,SAAS;YAAiB,CAAC;QAClF,MAAM,IAAI,MAAM,UAAU,OAAO,IAAI,UAAU,MAAM,IAAI,CAAC,oBAAoB,EAAE,SAAS,MAAM,EAAE;IACnG;IAEA,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,UAAU;IACrB,MAAM,OAAM,KAAa,EAAE,QAAgB;QACzC,MAAM,WAAW,MAAM,WAAyD,eAAe;YAC7F,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAO;YAAS;QACzC;QAEA,IAAI,+CAAkB,eAAe,SAAS,YAAY,EAAE;YAC1D,aAAa,OAAO,CAAC,cAAc,SAAS,YAAY;QAC1D;IACF;IAEA,MAAM,UAAS,KAAa,EAAE,IAAY,EAAE,QAAgB;QAC1D,MAAM,WAAW,MAAM,WAAyD,kBAAkB;YAChG,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAO;gBAAM;YAAS;QAC/C;QAEA,IAAI,+CAAkB,eAAe,SAAS,YAAY,EAAE;YAC1D,aAAa,OAAO,CAAC,cAAc,SAAS,YAAY;QAC1D;IACF;IAEA;QACE,wCAAmC;YACjC,aAAa,UAAU,CAAC;QAC1B;IACF;AACF;AAGO,MAAM,WAAW;IACtB,MAAM;QACJ,OAAO,WAA2E;IACpF;IAEA,MAAM,mBAAkB,IAAuD;QAC7E,MAAM,WAAW,aAAa;YAC5B,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;QACvB;IACF;AACF;AAGO,MAAM,WAAW;IACtB,MAAM;QACJ,OAAO,WAAkB;IAC3B;IAEA,MAAM,SAAQ,EAAU;QACtB,OAAO,WAAgB,CAAC,OAAO,EAAE,IAAI;IACvC;IAEA,MAAM,QAAO,IAQZ;QACC,OAAO,WAAgB,UAAU;YAC/B,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;QACvB;IACF;IAEA,MAAM,QAAO,EAAU,EAAE,IASvB;QACA,OAAO,WAAgB,CAAC,OAAO,EAAE,IAAI,EAAE;YACrC,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;QACvB;IACF;IAEA,MAAM,QAAO,EAAU;QACrB,MAAM,WAAW,CAAC,OAAO,EAAE,IAAI,EAAE;YAC/B,QAAQ;QACV;IACF;AACF;AAGO,MAAM,mBAAmB;IAC9B,MAAM;QACJ,OAAO,WAAkB;IAC3B;IAEA,MAAM,QAAO,IAA8C;QACzD,OAAO,WAAgB,mBAAmB;YACxC,QAAQ;YACR,MAAM,KAAK,SAAS,CAAC;QACvB;IACF;AACF"}},
    {"offset": {"line": 1480, "column": 0}, "map": {"version":3,"sources":["file:///D:/5th%20sem/PULSE-AI-PROJECT/lib/store-sync.ts"],"sourcesContent":["import { useStore } from \"./store\"\r\nimport { tasksAPI, focusSessionsAPI } from \"./api\"\r\n\r\n/**\r\n * Syncs the local Zustand store with the backend API\r\n * This function fetches data from the API and updates the store\r\n */\r\nexport async function syncStoreWithAPI(): Promise<void> {\r\n  try {\r\n    // Sync tasks\r\n    try {\r\n      const tasks = await tasksAPI.getAll()\r\n      const store = useStore.getState()\r\n      \r\n      // Map API tasks to store format\r\n      const mappedTasks = tasks.map((task: any) => ({\r\n        id: task.id,\r\n        title: task.title,\r\n        description: task.description || \"\",\r\n        priority: task.priority,\r\n        timeEstimate: task.time_estimate || 30,\r\n        completed: task.completed || false,\r\n        createdAt: new Date(task.created_at),\r\n        category: task.category,\r\n        dueDate: task.due_date ? new Date(task.due_date).toISOString().split(\"T\")[0] : undefined,\r\n        focusMode: task.focus_mode || false,\r\n      }))\r\n\r\n      // Update store with synced tasks\r\n      useStore.setState({ tasks: mappedTasks })\r\n    } catch (error) {\r\n      console.error(\"Failed to sync tasks:\", error)\r\n    }\r\n\r\n    // Sync focus sessions\r\n    try {\r\n      const sessions = await focusSessionsAPI.getAll()\r\n      const mappedSessions = sessions.map((session: any) => ({\r\n        id: session.id,\r\n        duration: session.duration,\r\n        date: new Date(session.created_at || session.date),\r\n        completed: session.completed || false,\r\n      }))\r\n\r\n      useStore.setState({ focusSessions: mappedSessions })\r\n    } catch (error) {\r\n      console.error(\"Failed to sync focus sessions:\", error)\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Failed to sync store with API:\", error)\r\n    // Don't throw - allow app to continue with local state\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAMO,eAAe;IACpB,IAAI;QACF,aAAa;QACb,IAAI;YACF,MAAM,QAAQ,MAAM,yHAAQ,CAAC,MAAM;YACnC,MAAM,QAAQ,2HAAQ,CAAC,QAAQ;YAE/B,gCAAgC;YAChC,MAAM,cAAc,MAAM,GAAG,CAAC,CAAC,OAAc,CAAC;oBAC5C,IAAI,KAAK,EAAE;oBACX,OAAO,KAAK,KAAK;oBACjB,aAAa,KAAK,WAAW,IAAI;oBACjC,UAAU,KAAK,QAAQ;oBACvB,cAAc,KAAK,aAAa,IAAI;oBACpC,WAAW,KAAK,SAAS,IAAI;oBAC7B,WAAW,IAAI,KAAK,KAAK,UAAU;oBACnC,UAAU,KAAK,QAAQ;oBACvB,SAAS,KAAK,QAAQ,GAAG,IAAI,KAAK,KAAK,QAAQ,EAAE,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG;oBAC/E,WAAW,KAAK,UAAU,IAAI;gBAChC,CAAC;YAED,iCAAiC;YACjC,2HAAQ,CAAC,QAAQ,CAAC;gBAAE,OAAO;YAAY;QACzC,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;QACzC;QAEA,sBAAsB;QACtB,IAAI;YACF,MAAM,WAAW,MAAM,iIAAgB,CAAC,MAAM;YAC9C,MAAM,iBAAiB,SAAS,GAAG,CAAC,CAAC,UAAiB,CAAC;oBACrD,IAAI,QAAQ,EAAE;oBACd,UAAU,QAAQ,QAAQ;oBAC1B,MAAM,IAAI,KAAK,QAAQ,UAAU,IAAI,QAAQ,IAAI;oBACjD,WAAW,QAAQ,SAAS,IAAI;gBAClC,CAAC;YAED,2HAAQ,CAAC,QAAQ,CAAC;gBAAE,eAAe;YAAe;QACpD,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kCAAkC;QAClD;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;IAChD,uDAAuD;IACzD;AACF"}},
    {"offset": {"line": 1541, "column": 0}, "map": {"version":3,"sources":["file:///D:/5th%20sem/PULSE-AI-PROJECT/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\r\nimport { twMerge } from \"tailwind-merge\"\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 1559, "column": 0}, "map": {"version":3,"sources":["file:///D:/5th%20sem/PULSE-AI-PROJECT/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useStore } from \"@/lib/store\"\nimport { syncStoreWithAPI } from \"@/lib/store-sync\"\nimport { authAPI, usersAPI } from \"@/lib/api\"\nimport AuthWelcome from \"@/components/auth-welcome\"\nimport OnboardingFlow from \"@/components/onboarding-flow\"\nimport Dashboard from \"@/components/dashboard\"\nimport DayPlanner from \"@/components/day-planner\"\nimport AnalyticsDashboard from \"@/components/analytics-dashboard\"\nimport SettingsPage from \"@/components/settings-page\"\nimport CoachPanel from \"@/components/coach-panel\"\nimport Navigation from \"@/components/navigation\"\nimport TaskManager from \"@/components/task-manager\"\nimport MoodTracker from \"@/components/mood-tracker\"\nimport AppHeader from \"@/components/app-header\"\nimport BlockingSettings from \"@/components/blocking-settings\"\nimport HabitTracker from \"@/components/habit-tracker\"\nimport Goals from \"@/components/goals\"\nimport DistractionLog from \"@/components/distraction-log\"\nimport Challenges from \"@/components/challenges\"\nimport TimeBlockCalendar from \"@/components/time-block-calendar\"\nimport FocusSounds from \"@/components/focus-sounds\"\nimport Reports from \"@/components/reports\"\nimport TeamCollaboration from \"@/components/team-collaboration\"\nimport SmartNotifications from \"@/components/smart-notifications\"\nimport VoiceCommands from \"@/components/voice-commands\"\n\nexport default function Home() {\n  // ALL HOOKS MUST BE CALLED AT THE TOP - BEFORE ANY CONDITIONAL RETURNS\n  const { auth, setAuth, currentPage, isMobileMenuOpen, setMobileMenuOpen } = useStore()\n  const [isOnboarded, setIsOnboarded] = useState<boolean | null>(null) // null = loading, false = not onboarded, true = onboarded\n  const [isCheckingAuth, setIsCheckingAuth] = useState(true) // Track if we're still checking auth\n  const [hasSetInitialPage, setHasSetInitialPage] = useState(false) // Track if we've set initial page\n\n  // Check if user is authenticated on mount\n  useEffect(() => {\n    let isMounted = true\n    \n    const checkAuth = async () => {\n      setIsCheckingAuth(true)\n      \n      // Always check token in localStorage first (most reliable)\n      const token = typeof window !== \"undefined\" ? localStorage.getItem(\"auth_token\") : null\n      \n      if (!token) {\n        // No token - show login\n        if (isMounted) {\n          setAuth(false, \"\")\n          setIsOnboarded(false)\n          setIsCheckingAuth(false)\n        }\n        return\n      }\n\n      // We have a token - verify it and get user info\n      try {\n        const user = await usersAPI.getCurrentUser() as { email: string; name: string; onboarding_completed: boolean }\n        if (isMounted) {\n          if (user && user.email) {\n            setAuth(true, user.email)\n            // Set onboarding status - existing users should have this as true\n            const onboardingStatus = user.onboarding_completed === true\n            setIsOnboarded(onboardingStatus)\n            setIsCheckingAuth(false)\n            // Sync data from API (don't wait for it)\n            syncStoreWithAPI().catch((syncError) => {\n              console.error(\"Failed to sync store:\", syncError)\n            })\n          } else {\n            // User data not found\n            setIsOnboarded(false)\n            setIsCheckingAuth(false)\n          }\n        }\n      } catch (error) {\n        console.error(\"Auth check error:\", error)\n        if (isMounted) {\n          // Not authenticated or token expired - clear token and show login\n          authAPI.logout()\n          setAuth(false, \"\")\n          setIsOnboarded(false)\n          setIsCheckingAuth(false)\n        }\n      }\n    }\n    \n    checkAuth()\n    \n    // Cleanup function\n    return () => {\n      isMounted = false\n    }\n  }, [setAuth]) // Run only on mount - check token from localStorage\n\n  // Set initial page to dashboard only once when user first becomes authenticated and onboarded\n  useEffect(() => {\n    if (auth.isAuthenticated && isOnboarded && !isCheckingAuth && !hasSetInitialPage) {\n      const { setCurrentPage, currentPage: storeCurrentPage } = useStore.getState()\n      // Only set to dashboard if currentPage is not already set to a valid page\n      // This ensures we don't override user navigation\n      if (!storeCurrentPage || storeCurrentPage === \"dashboard\") {\n        setCurrentPage(\"dashboard\")\n      }\n      setHasSetInitialPage(true)\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [auth.isAuthenticated, isOnboarded, isCheckingAuth]) // Only depend on auth state, not currentPage\n\n  // NOW WE CAN DO CONDITIONAL RENDERING AFTER ALL HOOKS\n  if (!auth.isAuthenticated) {\n    return <AuthWelcome />\n  }\n\n  // Show loading state while checking auth\n  if (isCheckingAuth) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto\"></div>\n          <p className=\"mt-4 text-muted-foreground\">Loading...</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (!isOnboarded) {\n    return (\n      <OnboardingFlow\n        onComplete={async () => {\n          try {\n            await usersAPI.updateCurrentUser({ onboarding_completed: true })\n            setIsOnboarded(true)\n            // Ensure we're on dashboard after onboarding\n            const { setCurrentPage } = useStore.getState()\n            setCurrentPage(\"dashboard\")\n          } catch (error) {\n            console.error(\"Failed to update onboarding status:\", error)\n            setIsOnboarded(true) // Still proceed even if API call fails\n            const { setCurrentPage } = useStore.getState()\n            setCurrentPage(\"dashboard\")\n          }\n        }}\n      />\n    )\n  }\n\n  return (\n    <div className=\"flex h-screen bg-background\">\n      <Navigation\n        isMobileOpen={isMobileMenuOpen}\n        onMobileClose={() => setMobileMenuOpen(false)}\n      />\n      <main className=\"flex-1 overflow-auto lg:ml-0 flex flex-col\">\n        <AppHeader />\n        <div className=\"flex-1 overflow-auto\">\n          {currentPage === \"dashboard\" && <Dashboard />}\n          {currentPage === \"tasks\" && <TaskManager />}\n          {currentPage === \"habits\" && <HabitTracker />}\n          {currentPage === \"goals\" && <Goals />}\n          {currentPage === \"mood\" && <MoodTracker />}\n          {currentPage === \"planner\" && <DayPlanner />}\n          {currentPage === \"timeblocks\" && <TimeBlockCalendar />}\n          {currentPage === \"analytics\" && <AnalyticsDashboard />}\n          {currentPage === \"distractions\" && <DistractionLog />}\n          {currentPage === \"challenges\" && <Challenges />}\n          {currentPage === \"sounds\" && <FocusSounds />}\n          {currentPage === \"reports\" && <Reports />}\n          {currentPage === \"team\" && <TeamCollaboration />}\n          {currentPage === \"notifications\" && <SmartNotifications />}\n          {currentPage === \"voice\" && <VoiceCommands />}\n          {currentPage === \"blocking\" && <BlockingSettings />}\n          {currentPage === \"settings\" && <SettingsPage />}\n          {currentPage === \"coach\" && <CoachPanel />}\n        </div>\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}